<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Little Alchemy Clone - Fusion Al√©atoire</title>
  <style>
    :root {
      /* Couleurs pour le mode clair (contraste augment√©) */
      --bg-color-light: #e6e6e6;
      --sidebar-bg-light: #f5f5f5;
      --workspace-bg-light: #d0d0d0;
      --element-bg-light: #6A9BFF;
      --floating-bg-light: #ffe0a0;

      /* Couleurs pour le mode sombre (adapt√©es avec le nouveau bleu fonc√©) */
      --bg-color-dark: #121212;
      --sidebar-bg-dark: #1e1e1e;
      --workspace-bg-dark: #2c2c2c;
      --element-bg-dark: #4C75BF;
      --floating-bg-dark: #4C75BF;

      --glow-color: #3fe03f;
      --transition-speed: 0.3s;

      /* Couleurs de raret√© (mode clair) */
      --legendary-light: #87ffe9;
      --epic-light: #c787ff;
      --rare-light: #ffba70;
      /* Communs utilisent --element-bg-light */

      /* Couleurs de raret√© (mode sombre) */
      --legendary-dark: #00bcd4; /* Un bleu-vert plus distinct pour le sombre */
      --epic-dark: #9c27b0;     /* Un violet plus profond pour le sombre */
      --rare-dark: #ff9800;      /* Un orange plus fonc√© pour le sombre */
      /* Communs utilisent --element-bg-dark */
    }

    body {
      font-family: sans-serif;
      margin: 0;
      display: flex;
      height: 100vh;
      background: var(--bg-color-light);
      color: #111;
      transition: background var(--transition-speed), color var(--transition-speed);
    }
    body.dark {
      background: var(--bg-color-dark);
      color: #eee;
    }

    #fixed-controls {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 10px;
      z-index: 100;
    }

    #themeToggle, #cleanWorkspaceBtn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      font-size: 1.2em;
      background-color: white;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
      user-select: none;
    }
    #themeToggle:hover, #cleanWorkspaceBtn:hover {
      transform: scale(1.1);
    }
    #themeToggle:active, #cleanWorkspaceBtn:active, #sort-buttons button:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }

    body.dark #themeToggle,
    body.dark #cleanWorkspaceBtn {
      background-color: #333;
      color: white;
    }

    #sidebar {
      width: 250px;
      background: var(--sidebar-bg-light);
      padding: 10px;
      overflow-y: hidden; /* Chang√© pour cacher le d√©bordement vertical */
      border-right: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      transition: background var(--transition-speed), color var(--transition-speed);
    }
    body.dark #sidebar {
      background: var(--sidebar-bg-dark);
      border-color: #444;
      color: #ccc;
    }

    #tab-container {
      display: flex;
      border-bottom: 1px solid #ccc;
      margin-bottom: 10px;
      flex-shrink: 0; /* Emp√™che les onglets de r√©tr√©cir */
    }
    body.dark #tab-container {
      border-color: #444;
    }
    .tab-button {
      flex: 1;
      padding: 10px;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 1em;
      color: #666;
      transition: color 0.3s, border-bottom 0.3s;
      border-bottom: 3px solid transparent;
    }
    body.dark .tab-button {
      color: #888;
    }
    .tab-button.active {
      color: #111;
      font-weight: bold;
      border-bottom: 3px solid var(--element-bg-light);
    }
    body.dark .tab-button.active {
      color: #eee;
      border-bottom-color: var(--element-bg-dark);
    }

    #search {
      margin-top: 10px; /* Ajust√© pour √™tre apr√®s les listes */
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #ccc;
      transition: background var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed), box-shadow 0.2s ease;
      background: #fff;
      color: #000;
      flex-shrink: 0;
    }
    #search:hover {
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
      border-color: #666;
    }
    body.dark #search {
      background: #222;
      color: #ddd;
      border-color: #555;
    }
    body.dark #search:hover {
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
      border-color: #888;
    }

    #sort-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 10px;
      margin-bottom: 10px;
      flex-shrink: 0;
    }
    #sort-buttons button {
      flex: 1;
      min-width: 80px;
      padding: 5px 8px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85em;
      background: #4A6B7F;
      color: white;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    #sort-buttons button:hover {
      background: #3B5B6F;
      transform: translateY(-1px);
    }
    body.dark #sort-buttons button {
      background: #3A3A3A;
    }
    body.dark #sort-buttons button:hover {
      background: #4A4A4A;
    }
    #sort-buttons button.active {
      background: #3fe03f;
      font-weight: bold;
      color: #222;
    }
    body.dark #sort-buttons button.active {
      background: #3fe03f;
      color: #222;
    }
    
    .list-container {
        flex: 1; /* Permet au conteneur de prendre l'espace restant */
        overflow-y: auto; /* Ajoute une barre de d√©filement si n√©cessaire */
        min-height: 0; /* Essentiel pour que flexbox fonctionne correctement */
    }

    #elements-list, #undiscovered-list, #achievements-content { /* Added #achievements-content */
      user-select:none;
    }
    #undiscovered-list { /* #achievements-content display is handled by JS */
        display: none;
    }

    .undiscovered-element {
        filter: grayscale(1);
        opacity: 0.6;
        cursor: default;
        pointer-events: none;
    }

    #workspace {
      flex: 1;
      position: relative;
      background: var(--workspace-bg-light);
      transition: background var(--transition-speed);
      overflow: hidden;
    }
    body.dark #workspace {
      background: var(--workspace-bg-dark);
    }

    canvas#backgroundCanvas, canvas#constellationCanvas {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .element {
      display: inline-block;
      padding: 5px 10px;
      margin: 5px;
      background: var(--element-bg-light);
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: background var(--transition-speed), color var(--transition-speed), box-shadow 0.2s ease, text-shadow 0.2s ease, transform 0.2s ease, border-color 0.2s ease; /* Added border-color to transition */
      color: #000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.4);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
      border: 1px solid transparent; /* Added a transparent border for smooth glow transition */
    }
    .element:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    body.dark .element {
      background: var(--element-bg-dark);
      color: #eee;
      box-shadow: 0 3px 8px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.1);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    }
    body.dark .element:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.9);
    }
    .element:active {
      cursor: grabbing;
    }

    /* Styles de raret√© */
    .element.legendary { background-color: var(--legendary-light); color: #000; }
    body.dark .element.legendary { background-color: var(--legendary-dark); color: #fff; }
    .element.epic { background-color: var(--epic-light); color: #000; }
    body.dark .element.epic { background-color: var(--epic-dark); color: #fff; }
    .element.rare { background-color: var(--rare-light); color: #000; }
    body.dark .element.rare { background-color: var(--rare-dark); color: #fff; }
    /* Pas de classe pour "common" car il utilise d√©j√† les couleurs par default */
    
    .floating-element {
      position: absolute;
      padding: 5px 10px;
      background: var(--floating-bg-light);
      border: 1px solid #aaa;
      border-radius: 5px;
      cursor: move;
      user-select: none;
      white-space: nowrap;
      transition:
        transform var(--transition-speed) ease,
        opacity var(--transition-speed) ease,
        box-shadow 0.2s ease,
        background var(--transition-speed),
        border-color var(--transition-speed),
        color var(--transition-speed),
        text-shadow 0.2s ease;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.5);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.15);
      color: #000;
      z-index: 1;
    }
    .floating-element:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.4);
    }
    body.dark .floating-element {
      background: var(--floating-bg-dark);
      border-color: var(--floating-bg-dark);
      color: #e0eaff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.9), inset 0 1px 0 rgba(255,255,255,0.15);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
    body.dark .floating-element:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.95);
    }

    /* Styles de raret√© pour les √©l√©ments flottants */
    .floating-element.legendary { background-color: var(--legendary-light); border-color: var(--legendary-light); color: #000; }
    body.dark .floating-element.legendary { background-color: var(--legendary-dark); border-color: var(--legendary-dark); color: #fff; }
    .floating-element.epic { background-color: var(--epic-light); border-color: var(--epic-light); color: #000; }
    body.dark .floating-element.epic { background-color: var(--epic-dark); border-color: var(--epic-dark); color: #fff; }
    .floating-element.rare { background-color: var(--rare-light); border-color: var(--rare-light); color: #000; }
    body.dark .floating-element.rare { background-color: var(--rare-dark); border-color: var(--rare-dark); color: #fff; }


    .combine-animation { animation: pop 0.4s ease forwards; }
    /* General glow for any element (floating-element or sidebar element) */
    .glow { 
        box-shadow: 0 0 15px 6px var(--glow-color); /* Increased blur and spread */
        border-color: var(--glow-color); 
        transition: box-shadow 0.2s ease, border-color 0.2s ease; 
    }
    .can-combine-glow { 
        box-shadow: 0 0 20px 8px var(--glow-color); /* Increased blur and spread */
        border-color: var(--glow-color); 
        transition: box-shadow 0.15s ease, border-color 0.15s ease; 
    }

    /* Specific rules for .element when it has .glow or .can-combine-glow */
    .element.glow {
        box-shadow: 0 0 15px 6px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.4); /* Apply stronger glow */
        border-color: var(--glow-color);
    }
    body.dark .element.glow {
        box-shadow: 0 0 15px 6px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.1);
        border-color: var(--glow-color);
    }

    .element.can-combine-glow {
        box-shadow: 0 0 20px 8px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.4); /* Apply stronger glow */
        border-color: var(--glow-color);
    }
    body.dark .element.can-combine-glow {
        box-shadow: 0 0 20px 8px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.1);
        border-color: var(--glow-color);
    }

    /* Enhanced glow for legendary elements when they glow */
    .element.legendary.glow,
    .floating-element.legendary.glow {
        box-shadow: 0 0 25px 12px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.6); /* Even stronger glow */
        border-color: var(--glow-color);
    }
    body.dark .element.legendary.glow,
    body.dark .floating-element.legendary.glow {
        box-shadow: 0 0 25px 12px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.2);
        border-color: var(--glow-color);
    }

    .element.legendary.can-combine-glow,
    .floating-element.legendary.can-combine-glow {
        box-shadow: 0 0 30px 15px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.6); /* Even stronger glow */
        border-color: var(--glow-color);
    }
    body.dark .element.legendary.can-combine-glow,
    body.dark .floating-element.legendary.can-combine-glow {
        box-shadow: 0 0 30px 15px var(--glow-color), inset 0 1px 0 rgba(255,255,255,0.2);
        border-color: var(--glow-color);
    }

    @keyframes pop { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(1); } }
    @keyframes fadeOutAndShrink { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.5); } }
    .disappear-animation { animation: fadeOutAndShrink 0.3s ease-out forwards; pointer-events: none; }
    @keyframes newElementHighlight { 0% { transform: scale(1); box-shadow: 0 0 0 0 transparent; background-color: inherit; } 25% { transform: scale(1.15); box-shadow: 0 0 25px 8px var(--glow-color); background-color: var(--glow-color); color: #222; } 75% { transform: scale(1.05); box-shadow: 0 0 10px 4px var(--glow-color); } 100% { transform: scale(1); box-shadow: initial; background-color: inherit; color: inherit; } }
    .new-element-animation { animation: newElementHighlight 1s ease-out; }
    @keyframes fadeInScale { 0% { opacity: 0; transform: scale(0.9); } 100% { opacity: 1; transform: scale(1); } }
    .element.animate-in { animation: fadeInScale 0.3s ease-out forwards; }

    /* Styles pour la section des succ√®s */
    #achievements-content {
        padding: 10px;
        display: none; /* Managed by JS */
        flex-direction: column;
        gap: 10px;
        overflow-y: auto;
    }

    .achievement-item {
        background: var(--element-bg-light);
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        gap: 10px;
        transition: background 0.3s ease, transform 0.2s ease;
        opacity: 0.6; /* Default for unachieved */
        filter: grayscale(100%);
        border: 1px solid transparent;
    }
    body.dark .achievement-item {
        background: var(--element-bg-dark);
        box-shadow: 0 3px 8px rgba(0,0,0,0.5);
    }

    .achievement-item.achieved {
        opacity: 1;
        filter: grayscale(0%);
        box-shadow: 0 0 10px 3px var(--glow-color); /* Glow for achieved */
        border-color: var(--glow-color);
        transform: translateY(-2px);
    }

    .achievement-item .icon {
        font-size: 1.8em;
        line-height: 1;
    }

    .achievement-item .details {
        flex-grow: 1;
    }

    .achievement-item .title {
        font-weight: bold;
        font-size: 1.1em;
        margin-bottom: 3px;
    }

    .achievement-item .description {
        font-size: 0.9em;
        color: #555;
    }
    body.dark .achievement-item .description {
        color: #bbb;
    }
    .achievement-item.achieved .description {
        color: #333; /* Darker text for achieved in light mode */
    }
    body.dark .achievement-item.achieved .description {
        color: #eee; /* Lighter text for achieved in dark mode */
    }
    .achievement-item .progress {
        font-size: 0.8em;
        color: #777;
    }
    body.dark .achievement-item .progress {
        color: #ccc;
    }
  </style>
</head>
<body class="dark">
  <div id="fixed-controls">
    <button id="cleanWorkspaceBtn">üßπ</button>
    <button id="themeToggle"></button>
  </div>

  <div id="sidebar">
    <div id="tab-container">
        <button id="tab-discovered" class="tab-button active">D√©couverts</button>
        <button id="tab-undiscovered" class="tab-button">√Ä d√©couvrir</button>
        <button id="tab-achievements" class="tab-button">üèÜ</button>
    </div>

    <div class="list-container">
        <div id="elements-list"></div>
        <div id="undiscovered-list"></div>
        <div id="achievements-content">
            <!-- Achievements will be rendered here by JavaScript -->
        </div>
    </div>
    
    <div id="sort-buttons">
        <button id="sortByAge" class="active">Par √Çge</button>
        <button id="sortByName">Par Nom</button>
        <button id="sortByEmoji">Par Emoji</button>
        <button id="sortByRandom">Al√©atoire</button>
    </div>
    <input id="search" type="text" placeholder="üîç Rechercher..." autocomplete="off" />
  </div>

  <div id="workspace">
    <canvas id="backgroundCanvas"></canvas>
    <canvas id="constellationCanvas"></canvas>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      
      const recipes = {}; // Non utilis√© dans cette version de "fusion al√©atoire"
      const emojis = {};
      let allElementNames = [];
      const rarities = {}; // Nouveau: pour stocker la raret√© de chaque √©l√©ment

      // --- CORRECTION : Voici la liste COMPL√àTE de vos √©l√©ments ---
      const elementsJsonContent = [
        "üß¨ADN","üß≤aimant","‚úàÔ∏èavion","üí°ampoule","üß°ambre","üíúam√©thyste","üêúfourmi","üß≠boussole","üèπchasse","üèõÔ∏ètemple","‚õ∫camping","üöóconduite","‚öôÔ∏èengrenage","ü™ìhache","üê¥crin","üêÉcorne","üêòivoire","üê¢√©caille","üíÄos","ü©∏sang","ü•õlait","üßàgraisse","ü•©viande","üêüpoisson","üßπpoussi√®re","‚ö™chaux","üå≥mousse","üçÑlichen","üåøalgue","üî¨plancton","üçΩÔ∏ènutriment","üç¨sucre","üßÇsel","üå∂Ô∏è√©pice","üç∂huile","üß™vinaigre","üç∑alcool","üçûlevure","ü¶†bact√©rie","ü¶†virus","üß¨g√®ne","üî¨prot√©ine","üß™acide","üß™base","üß™solution","‚öóÔ∏èm√©lange","üí®gaz","üíßliquide","üß±solide","‚ú®plasma","üååvide","‚è≥temps","üåêespace","‚úäforce","üéØpression","üå°Ô∏ètemp√©rature","üîäson","üåülumi√®re","üåëombre","üé®couleur","üëÉodeur","üëÖgo√ªt","‚úãtoucher","üëÄvision","üëÇou√Øe","üëÉodorat","ü§∏√©quilibre","ü§ïdouleur","üòäplaisir","ü§îconscience","üß†pens√©e","üí°m√©moire","üò¥r√™ve","üëªesprit","üôè√¢me","üö∂corps","üíñvie","üíÄmort","üë∂naissance","üå±croissance","üìà√©volution","üîÑchangement","üèÉmouvement","üßòrepos","üíºtravail","‚ö°√©nergie","üöÄvitesse","üìèdistance","‚öñÔ∏èmasse","üè∫volume","‚öñÔ∏èdensit√©","‚öñÔ∏èpoids","‚ô®Ô∏èchaleur","ü•∂froid","„Ä∞Ô∏èonde","‚öõÔ∏èparticule","‚öõÔ∏èatome","‚öõÔ∏èmol√©cule","üî¨cellule","ü©∏tissu","üß°organe","‚öôÔ∏èsyst√®me","üåøorganisme","üêæesp√®ce","üë•population","üå≤√©cosyst√®me","üåçbiosph√®re","ü™êplan√®te","üí´cosmos","üååunivers","ü™®ardoise","üíéopale","üî∂topaze","üíôsaphir","üíö√©meraude","üî¥rubis","üü°citrine","‚ö™zircon","üñ§onyx","‚ö™nacre","ü¶∑d√©fense","ü¶¥phalange","ü¶¥vert√®bre","ü¶¥cr√¢ne","ü¶¥m√¢choire","ü¶¥clavicule","ü¶¥c√¥te","ü¶¥tibia","ü¶¥f√©mur","üß¨cartilage","üíÖk√©ratine","ü¶∑√©mail","ü¶∑dentine","ü¶∑pulpe","ü™µ√©corce","üå≥rameau","üå≤tronc","üå≥racine","ü™µsouche","ü™µplanche","ü™µpoutre","ü™µcopeau","ü™µsciure","ü™µb√ªche","ü™µsarment","ü™öli√®ge","üß∫osier","üéãroseau","üåæpaille","üåæfoin","üåæson","üåæfarine","üçûlevain","üçûmie","üçûcro√ªte","üçöamidon","üçögrain","üç¨sirop","üçÆm√©lasse","üçØnectar","üçØpollen","üêùruche","ü™±ver","üêõchenille","ü¶ãchrysalide","ü¶ãpapillon","ü¶ócriquet","üêûcoccinelle","üï∑Ô∏èaraign√©e","ü¶Çscorpion","ü¶ümoustique","ü™∞mouche","ü™≤scarab√©e","ü¶ócigale","ü¶ógrillon","üêåescargot","ü¶™moule","ü¶™hu√Ætre","ü¶ûcrabe","ü¶êcrevette","ü¶ëcalamar","üêôpieuvre","üê†nageoire","üê†√©caille","ü¶àaileron","üê°poisson","üê¨dauphin","üê≥baleine","üêäreptile","üêçserpent","ü¶él√©zard","üê¢tortue","üê∏grenouille","üê•oisillon","üê£poussin","ü•öcoque","ü•öblanc","ü•öjaune","ü¶¢duvet","üêìcr√™te","üêìbarbillon","üêìplume","üêàpoil","üêïmue","üêëtoison","üêêcorne","üê¥sabot","üêÑpis","üêñlard","ü•©filet","ü•©c√¥te","ü•©gigot","ü•©jarret","üçócuisse","üçópoitrine","ü•ìbacon","üå≠saucisse","üçïjambon","üßÇsaumure","üç∂laiton","üî©boulon","üß≤aimant","üí°bobine","üîåfil","‚ö°circuit","üîådiode","üíªpuce","üì°antenne","üì°onde","üìªradio","üì∫√©cran","üî¶lampe","üí°ampoule","üîåc√¢ble","‚õìÔ∏ècha√Æne","üîómaillon","ü™¢n≈ìud","üéóÔ∏èruban","üß£√©charpe","üß§gant","üß¶chaussette","üëömanche","üëñjambe","üëójupe","üß•col","üëïbouton","üëïfermeture","üéíbretelle","üëõfermoir","üîëserrure","üö™charni√®re","ü™üvitre","üß±brique","ü™®moellon","ü™®granulat","ü™®pav√©","ü™®dallage","ü™®tuile","ü™®bardeaux","ü™öplanche","ü™öpoutre","ü™öchevrons","üî©vis","üî®clou","üî©√©crou","üî®rondelle","üî®rivet","üî®goujon","üî®goupille","ü™õtournevis","üîßcl√©","ü™öscie","ü™ìhache","‚õèÔ∏èpelle","‚õèÔ∏èpioche","‚õèÔ∏èmarteau","ü™örabot","ü™õburin","ü™õciseau","ü™õlime","ü™õr√¢pe","ü™õ√©tau","ü™õperceuse","ü™õforet","‚öôÔ∏èmoteur","‚öôÔ∏èroue","‚öôÔ∏èessieu","‚öôÔ∏èpiston","‚öôÔ∏ècylindre","‚öôÔ∏èarbre","‚öôÔ∏èpalier","‚öôÔ∏èressort","‚öôÔ∏èfrein","‚öôÔ∏èembrayage","‚öôÔ∏èradiateur","‚öôÔ∏ècarburateur","‚öôÔ∏èinjecteur","‚öôÔ∏èpompe","‚öôÔ∏èvalve","‚öôÔ∏èjoint","‚öôÔ∏èturbine","‚öôÔ∏èh√©lice","‚öôÔ∏èr√©acteur","‚öôÔ∏èpropulseur","‚öôÔ∏èfus√©e","üöÄsatelite","üõ∞Ô∏èsonde","üî≠t√©lescope","üî¨microscope","‚öñÔ∏èbalance","üìèm√®tre","üìêr√®gle","üìêcompas","üìê√©querre","üßÆcalculatrice","üßÆordinateur","üñ•Ô∏èclavier","üñ±Ô∏èsouris","üñ®Ô∏èimprimante","‚öôÔ∏èprocesseur","üíæm√©moire","üíødisque","üì°routeur","üåêinternet","‚òÅÔ∏ècloud","üíæfichier","üìÑdocument","üñºÔ∏èimage","üé∂son","üé¨vid√©o","üìßemail","üí¨message","üìûappel","üó£Ô∏èvoix","üó£Ô∏èparole","üëÇ√©coute","üëÅÔ∏èregard","üëÉrespiration","üëÖgustation","üñêÔ∏èsensation","üß†intuition","üß†raison","üß†logique","üß†cr√©ativit√©","üß†imagination","üß†m√©moire","üß†apprentissage","üß†sagesse","üß†connaissance","üß†compr√©hension","üß†intelligence","üß†r√©flexion","üß†conscience","üß†subconscient","üß†inconscient","üí≠r√™ve","üåôsommeil","‚òÄÔ∏è√©veil","üö∂marche","üèÉcourse","ü§∏saut","üèänage","üö¥v√©lo","üöóconduite","‚úàÔ∏èvol","üöÄpropulsion","‚öìancre","üó∫Ô∏ècarte","üìçpoint","üìèligne","üìêangle","üìêcourbe","üìêcercle","üìêspirale","üìêtriangle","üìêcarr√©","üìêrectangle","üìêpolygone","üìêsph√®re","üìêcube","üìêc√¥ne","üìêcylindre","üìêpyramide","üìêprisme","üìêtore","‚öõÔ∏èquantum","‚öõÔ∏èphoton","‚öõÔ∏è√©lectron","‚öõÔ∏èproton","‚öõÔ∏èneutron","‚öõÔ∏ènoyau","‚öõÔ∏èquarks","‚öõÔ∏èleptons","‚öõÔ∏èbosons","‚öõÔ∏èfermions","‚öõÔ∏ègraviton","‚öõÔ∏ègluon","‚öõÔ∏èonde","‚öõÔ∏èchamp","‚öõÔ∏èforce","‚öõÔ∏ègravit√©","‚öõÔ∏è√©lectromagn√©tisme","‚öõÔ∏ènucl√©aire","‚öõÔ∏èfaible","‚öõÔ∏èfort","‚öõÔ∏ètemp√©rature","‚öõÔ∏èpression","‚öõÔ∏èdensit√©","‚öõÔ∏èviscosit√©","‚öõÔ∏èconductivit√©","‚öõÔ∏èr√©sistivit√©","‚öõÔ∏èr√©fraction","‚öõÔ∏èr√©flexion","‚öõÔ∏èabsorption","‚öõÔ∏è√©mission","‚öõÔ∏èdiffusion","‚öõÔ∏èdispersion","‚öõÔ∏èinterf√©rence","‚öõÔ∏èdiffraction","‚öõÔ∏èpolarisation","‚öõÔ∏èfr√©quence","‚öõÔ∏èlongueur","‚öõÔ∏èamplitude","‚öõÔ∏èphase","‚öõÔ∏èvitesse","‚öõÔ∏èacc√©l√©ration","‚öõÔ∏èmomentum","‚öõÔ∏è√©nergie","‚öõÔ∏ètravail","‚öõÔ∏èpuissance","‚öõÔ∏èchaleur","ü•∂froid","‚öõÔ∏èentropie","‚öõÔ∏èenthalpie","‚öõÔ∏èthermodynamique","‚öõÔ∏èm√©canique","‚öõÔ∏èoptique","‚öõÔ∏èacoustique","‚öõÔ∏è√©lectricit√©","‚öõÔ∏èmagn√©tisme","‚öõÔ∏èchimie","‚öõÔ∏èbiologie","‚öõÔ∏èg√©ologie","‚öõÔ∏èastronomie","‚öõÔ∏èm√©t√©orologie","‚öõÔ∏èoc√©anographie","‚öõÔ∏è√©cologie","‚öõÔ∏èpal√©ontologie","‚öõÔ∏èarch√©ologie","‚öõÔ∏èhistoire","‚öõÔ∏èg√©ographie","‚öõÔ∏èsociologie","‚öõÔ∏èpsychologie","‚öõÔ∏èphilosophie","‚öõÔ∏è√©thique","‚öõÔ∏èjustice","‚öõÔ∏èlibert√©","‚öõÔ∏è√©galit√©","‚öõÔ∏èfraternit√©","‚öõÔ∏èd√©mocratie","‚öõÔ∏èr√©publique","‚öõÔ∏èmonarchie","‚öõÔ∏ètyrannie","‚öõÔ∏èanarchie","‚öõÔ∏ècommunisme","‚öõÔ∏èsocialisme","‚öõÔ∏ècapitalisme","‚öõÔ∏è√©conomie","‚öõÔ∏ècommerce","‚öõÔ∏èfinance","‚öõÔ∏èbanque","‚öõÔ∏èmonnaie","‚öõÔ∏èimp√¥t","‚öõÔ∏èdette","‚öõÔ∏ècr√©dit","‚öõÔ∏èmarch√©","‚öõÔ∏èoffre","‚öõÔ∏èdemande","‚öõÔ∏èproduction","‚öõÔ∏èconsommation","‚öõÔ∏èinvestissement","‚öõÔ∏ètravail","‚öõÔ∏èemploi","‚öõÔ∏èch√¥mage","‚öõÔ∏èsalaire","‚öõÔ∏èpauvret√©","‚öõÔ∏èrichesse","‚öõÔ∏èclasse","‚öõÔ∏èsoci√©t√©","‚öõÔ∏èculture","‚öõÔ∏ètradition","‚öõÔ∏ècoutume","‚öõÔ∏èreligion","‚öõÔ∏èmythe","‚öõÔ∏èl√©gende","‚öõÔ∏èfolklore","‚öõÔ∏èart","üé®peinture","üé®sculpture","üé®dessin","üé®gravure","üé®musique","üé∂chant","üé∂danse","üé≠th√©√¢tre","üé¨cin√©ma","üìölitt√©rature","üìúpo√©sie","üìñroman","üìúnouvelle","üìúessai","üìúbiographie","üìúautobiographie","üìúdictionnaire","üìúencyclop√©die","üìúmanuel","üìújournal","üì∞magazine","üåêsite","üì≤application","üéÆjeu","üèÜsport","‚öΩfootball","üèÄbasketball","üéætennis","üèêvolleyball","üèârugby","‚öæbaseball","üèíhockey","ü•äboxe","ü•ãjudo","üßòyoga","üèÉathl√©tisme","üö¥cyclisme","üèänatation","‚õµvoile","üé£p√™che","üèπchasse","üèïÔ∏ècamping","üö∂randonn√©e","‚õ∞Ô∏èescalade","‚õ∑Ô∏èski","üèÇsnowboard","üèÑsurf","üßòm√©ditation","üôèpri√®re","üïØÔ∏èrituel","‚õ™temple","üïåmosqu√©e","üïçsynagogue","‚õ™√©glise","üôèculte","üïäÔ∏èpaix","‚öîÔ∏èguerre","üî´arme","üõ°Ô∏èarmure","üí•bombe","üí£missile","üí•explosion","üí•ruine","üí•destruction","üí•catastrophe","üí•d√©sastre","üí•crise","üí•chaos","üí•ordre","üí•harmonie","üí•√©quilibre","üí•justice","üí•loi","üí•r√®gle","üí•principe","üí•valeur","üí•vertu","üí•vice","üí•p√©ch√©","üí•pardon","üí•r√©demption","üí•salut","üí•enfer","üí•paradis","üí•ange","üí•d√©mon","üí•fant√¥me","üí•monstre","üí•dragon","üí•f√©e","üí•gnome","üí•elfe","üí•nain","üí•g√©ant","üí•humain","üí•homme","üí•femme","enfant","famille","amour","amiti√©","haine","peur","joie","tristesse","col√®re","surprise","d√©gout","shame","culpabilit√©","fiert√©","courage","l√¢chet√©","espoir","d√©sespoir","optimisme","pessimisme","sourire","pleur","rire","chuchotement","cri","silence","bruit","musique","rythme","m√©lodie","harmonie","dissonance","accord","note","cl√©","gamme","instrument","voix","ch≈ìur","orchestre","bande","groupe","soliste","duo","trio","quatuor","quintette","sextuor","septuor","octuor","ensemble","concert","r√©cital","spectacle","repr√©sentation","performance","artisanat","savoir-faire","comp√©tence","talent","don","aptitude","capacit√©","potentiel","limite","d√©fi","opportunit√©","choix","d√©cision","action","cons√©quence","r√©sultat","succ√®s","√©chec","victoire","d√©faite","progr√®s","r√©gression","stagnation","d√©veloppement","croissance","d√©clin","cycle","saison","printemps","√©t√©","automne","hiver","matin","jour","soir","nuit","aube","cr√©puscule","minuit","midi","heure","minute","seconde","instant","√©ternit√©","pass√©","pr√©sent","futur","m√©moire","oubli","souvenir","nostalgie","anticipation","attente","surprise","hasard","destin","fortune","malheur","chance","malchance","√©v√©nement","circonstance","situation","contexte","relation","connexion","lien","r√©seau","syst√®me","structure","organisation","hi√©rarchie","communaut√©","groupe","individu","soci√©t√©","civilisation","culture","tradition","innovation","progr√®s","r√©volution","√©volution","changement","continuit√©","stabilit√©","√©quilibre","d√©s√©quilibre","conflit","coop√©ration","collaboration","comp√©tition","rivalit√©","paix","guerre","alliance","trait√©","accord","pacte","serment","promesse","v√©rit√©","mensonge","secret","r√©v√©lation","doute","certitude","foi","croyance","religion","dogme","h√©r√©sie","rite","c√©r√©monie","f√™te","c√©l√©bration","jubil√©","anniversaire","naissance","bapt√™me","mariage","enterrement","deuil","comm√©moration","h√©ritage","patrimoine","l√©gat","testament","don","cadeau","dette","cr√©ance","pr√™t","emprunt","argent","pi√®ce","billet","monnaie","fortune","richesse","pauvret√©","mis√®re","abondance","manque","besoin","d√©sir","envie","satisfaction","frustration","plaisir","douleur","bonheur","malheur","bien","mal","vertu","vice","p√©ch√©","gr√¢ce","b√©n√©diction","mal√©diction","ch√¢timent","r√©compense","punition","justice","injustice","droit","devoir","responsabilit√©","libert√©","esclavage","tyrannie","oppression","r√©bellion","r√©volution","changement","progr√®s","d√©clin","cycle","fin","d√©but","üá´üá∑Paris","üóΩNew York","üóºTokyo","üá¨üáßLondres","üáÆüáπRome","üá™üá¨Le Caire","üáßüá∑Rio de Janeiro","üá®üá≥Shanghai","üáÆüá≥New Delhi","üá¶üá∫Sydney","üá¶üá∑Buenos Aires","üá®üá¶Toronto","üá≤üáΩMexico","üáøüá¶Johannesburg","üá∑üá∫Moscou","üá©üá™Berlin","üá™üá∏Madrid","üá≥üá±Amsterdam","üáßüá™Bruxelles","üá¶üáπVienne","üá®üá≠Gen√®ve","üá∏üá¨Singapour","üáπüá≠Bangkok","üá∞üá∑S√©oul","üáÆüá±J√©rusalem","üá¨üá∑Ath√®nes","üáÆüá™Dublin","üáµüáπLisbonne","üáπüá∑Istanbul","üá®üá±Santiago","üáµüá™Lima","üá®üá¥Bogota","üáªüá™Caracas","üáµüá∞Karachi","üáßüá©Dhaka","üá≥üá¨Lagos","üá∏üá¶Riyad","üá∂üá¶Doha","üá¶üá™Duba√Ø","üáÆüá©Jakarta","üáµüá≠Manille","üáªüá≥Hano√Ø","üá∞üá™Nairobi","üá≤üá¶Casablanca","üá®üá∫La Havane","üáÆüá∏Reykjavik","üá´üáÆHelsinki","üá≥üá¥Oslo","üá∏üá™Stockholm","üá©üá∞Copenhague","üë®‚Äçüî¨Einstein","üë©‚Äçüî¨Marie Curie","üé®L√©onard de Vinci","‚úçÔ∏èShakespeare","üëëCl√©op√¢tre","‚öîÔ∏èNapol√©on","‚úùÔ∏èJ√©sus","üåçChristophe Colomb","üé§Michael Jackson","üëë√âlizabeth II","‚òØÔ∏èConfucius","üßòBouddha","üé§Elvis Presley","‚úçÔ∏èVictor Hugo","üî¨Galil√©e","üëëJeanne d'Arc","üé®Picasso","üéºMozart","üé∏Jimi Hendrix","üèÄMichael Jordan","ü•ãBruce Lee","üó≥Ô∏èNelson Mandela","üó≥Ô∏èAbraham Lincoln","üó≥Ô∏èGandhi","üìöJane Austen","üíªSteve Jobs","üíªBill Gates","üöÄElon Musk","üìöJ.K. Rowling","üé§Freddie Mercury","üé≠Charlie Chaplin","üíÉMarilyn Monroe","üë®‚ÄçüöÄNeil Armstrong","üë®‚Äçüç≥Gordon Ramsay","üë©‚Äçüç≥Julia Child","üé©Walt Disney","üìöStephen King","üé§Beyonc√©","‚öΩPel√©","‚öΩMaradona","üèéÔ∏èMichael Schumacher","üéøRoger Federer","üéæSerena Williams","üèéÔ∏èLewis Hamilton","üèéÔ∏èAyrton Senna","üë©‚Äç‚öïÔ∏èFlorence Nightingale","üó≥Ô∏èMartin Luther King","üëëLouis XIV","‚úçÔ∏èMoli√®re","üé®Vincent van Gogh","üß±Minecraft","üçÑSuper Mario","üî´Fortnite","üß©Tetris","üó°Ô∏èThe Legend of Zelda","üåçWorld of Warcraft","üöóGrand Theft Auto","üíªCyberpunk 2077","üëΩHalo","üó°Ô∏èElder Scrolls","ü§ñPac-Man","üëªAmong Us","üí•Call of Duty","üèéÔ∏èMario Kart","üöÄSpace Invaders","üëæPok√©mon","‚öîÔ∏èFinal Fantasy","ü™ìGod of War","üåÉRed Dead Redemption","üì¶Portal","üïµÔ∏èAssassin's Creed","üéÆFIFA","üèÄNBA 2K","ü•ãMortal Kombat","ü•ãStreet Fighter","üèéÔ∏èGran Turismo","üì¶Fallout","üèπSkyrim","ü§ñDetroit: Become Human","üê∫The Witcher","üßüResident Evil","üåÉSilent Hill","üéÆOverwatch","‚öΩRocket League","üéµGuitar Hero","üíÉJust Dance","üéØDestiny","ü§ñBorderlands","ü§ñApex Legends","üïπÔ∏èPong","üëæDonkey Kong","üöÄAsteroids","üêçSnake","üéÆCandy Crush","üïµÔ∏èHitman","üéÆDark Souls","üêâElden Ring","üí•Doom","üëæHalf-Life","ü¶Ålion","üêò√©l√©phant","ü¶ígirafe","üêÖtigre","üêªours","üêºpanda","ü¶ärenard","üê∫loup","ü¶åcerf","üêálapin","üêøÔ∏è√©cureuil","ü¶áchauve-souris","ü¶âhibou","ü¶Öaigle","ü¶úperroquet","ü¶¢cygne","üïäÔ∏ècolombe","ü¶ãpapillon","üêùabeille","üêûcoccinelle","üêúfourmi","ü¶ósauterelle","üï∑Ô∏èaraign√©e","üêçcobra","üêäalligator","üê†requin","üêôpieuvre","üê≥dauphin","ü¶çgorille","üêµsinge","üê®koala","ü¶ôlama","üê™chameau","ü¶òkangourou","üêßmanchot","ü¶©flamant rose","ü¶âchouette","ü¶âharfang","üê∫coyote","üêªgrizzly","üêÖl√©opard","ü¶årenne","ü¶®mouffette","ü¶°blaireau","ü¶¶loutre","ü¶´castor","ü¶ùraton laveur","ü¶äfennec","üêíchimpanz√©","ü¶íokapi","ü¶ìz√©bre","ü¶õhippopotame","ü¶èrhinoc√©ros","üêòmammouth","ü¶ñdinosaure","üêâdragon","ü¶Ñlicorne","üßú‚Äç‚ôÄÔ∏èsir√®ne","üßöf√©e","üßômagicien","üßüzombie","üßõvampire","üê∫loup-garou","üëªfant√¥me","üëΩalien","ü§ñrobot","üöÄfus√©e","üõ∞Ô∏èsatellite","üî≠t√©lescope","üî¨microscope","üì±smartphone","üíªordinateur","üñ•Ô∏è√©cran","‚å®Ô∏èclavier","üñ±Ô∏èsouris","üîåprise","üîãbatterie","üí°ampoule","üî¶lampe de poche","üìªradio","üì∫t√©l√©vision","üì∏appareil photo","üé•cam√©ra","üé§microphone","üéßcasque","üó£Ô∏èhaut-parleur","üñ®Ô∏èimprimante","üíødisque","üíæcl√© USB","üåêinternet","‚òÅÔ∏ènuage (informatique)","üîêcybers√©curit√©","üîëcl√© (cryptographie)","üìàgraphique","üìätableau","üìùdocument","üìölivre","üì∞journal","üìùplume","‚úèÔ∏ècrayon","‚úíÔ∏èencre","üìèr√®gle","‚úÇÔ∏èciseaux","üìétrombone","üìå√©pingle","üóìÔ∏ècalendrier","‚è∞r√©veil","‚è±Ô∏èchronom√®tre","‚è≥sablier","üó∫Ô∏ècarte","üìç√©pingle de carte","üß≠boussole","üî≠jumelles","üéísac √† dos","üíºmallette","üëõporte-monnaie","üîëcl√© (physique)","üö™porte","ü™üfen√™tre","üè†maison","üè¢immeuble","üè´√©cole","üè•h√¥pital","üè™magasin","üè≠usine","üöútracteur","üèóÔ∏ègrue","üöõcamion","üööfourgonnette","üöêminibus","üöåbus","üöÇtrain","üöám√©tro","üöÑTGV","üö¢navire","üõ•Ô∏èyacht","üõ∂kayak","‚õµvoilier","üö§hors-bord","üöÅh√©licopt√®re","‚úàÔ∏èavion","üõ∞Ô∏ènavette spatiale","üå†√©toile filante","üåån√©buleuse","üî≠constellation","ü™êgalaxie","‚òÄÔ∏ècom√®te","‚òÑÔ∏èast√©ro√Øde","üåïplan√®te","üåëmercure","‚ö™v√©nus","üî¥mars","üîµjupiter","üü¢saturne","üü†uranus","üü£neptune","üîµpluton","ü™êlune","üí´√©toile","‚òÄÔ∏èsoleil","‚ú®univers","üåàarc-en-ciel","‚ö°orage","üå™Ô∏ètornade","üåätsunami","üåãvolcan","‚õ∞Ô∏èmontagne","üèûÔ∏èvall√©e","üèúÔ∏ècanyon","üèùÔ∏è√Æle","üèñÔ∏èplage","üå≤for√™t","üå≥arbre fruitier","üåøarbuste","üéãbambou","üåæbl√©","üåΩma√Øs","ü•ïcarotte","ü•îpomme de terre","üßÖoignon","üçÖtomate","üå∂Ô∏èpiment","ü•íconcombre","üçÜaubergine","ü•¶brocoli","ü•¨laitue","üçäorange","üçãcitron","üçépomme","üçêpoire","üçìfraise","üçáraisin","üçâpast√®que","ü•ùkiwi","üççananas","ü••noix de coco","ü•≠mangue","ü•ëavocat","üçåbanane","üçícerise","üçëp√™che","ü´êmyrtille","üå∞ch√¢taigne","ü•úcacahu√®te","üçûpain","ü•êcroissant","ü•ñbaguette","üçïpizza","üçîhamburger","üçüfrites","üå≠hot-dog","üåÆtaco","üçúnouilles","üç£sushi","üçöriz","üçùp√¢tes","üç≤soupe","üçõcurry","üç≥≈ìuf (plat)","ü•ûcr√™pe","üßágaufre","üç©donut","üç™cookie","üç∞g√¢teau","üç¶glace","üç´chocolat","üç¨bonbon","üç≠sucre d'orge","üçØmiel","‚òïcaf√©","üçµth√©","ü•õlait","ü•§soda","üç∑vin","üç∫bi√®re","üç∏cocktail","ü•Çchampagne","üçæbouteille","üç¥fourchette","ü•Ñcuill√®re","üî™couteau","üçΩÔ∏èassiette","ü•£bol","ü•õverre","‚òïtasse","üç≥po√™le","üç≤casserole","üî™planche √† d√©couper","üßägla√ßon","üßÇsel","üå∂Ô∏èpoivre","üåøherbe aromatique","üßÑail","üßÖoignon","ü•îgingembre","ü•ïcarotte","ü•¶chou","üí®vapeur","üå´Ô∏èbrume","‚òÅÔ∏ènuage","üåßÔ∏èpluie","üåàarc-en-ciel","‚ùÑÔ∏èneige","üßäglace","‚ùÑÔ∏ègel","üåäoc√©an","üèûÔ∏èlac","üíßrivi√®re","üí¶goutte","üåãlave","ü™®pierre","‚õ∞Ô∏èroche","üèîÔ∏èmontagne","üèñÔ∏èsable","üèúÔ∏èd√©sert","üå¨Ô∏èdune","üå≥arbre","ü™µbois","üåøfeuille","üå∏fleur","üçÑchampignon","üåæherbe","üå±graine","üçéfruit","ü•ïl√©gume","üåæc√©r√©ale","üåªpollen","üçØmiel","üêùcire","ü•ö≈ìuf","ü¶¥os","ü™∂plume","üß∂laine","üßµcoton","üéãfibre","ü™πnid","üï∏Ô∏ètoile","üêöcoquille","üíécristal","‚ú®gemme","üí°lumi√®re","üåëobscurit√©","‚ö°foudre","üí•√©tincelle","‚≠ê√©toile","‚òÑÔ∏èm√©t√©ore","üåïlune","‚òÄÔ∏èsoleil","üåågalaxie","üåÄvent","üå™Ô∏ètornade","üßägr√™le","üå®Ô∏ègivre","üíßros√©e","üßästalagmite","üßästalactite","üíßsource","üå´Ô∏èbrouillard","üíßflotte","üíßhumide","üíßmouill√©","‚òÄÔ∏èsec","üü§glaise","ü™®gravier","üóørocher","‚ö™galet","üî™silex","üíéquartz","ü™®granit","‚ö™calcaire","üåãbasalte","üè∫argile","üñäÔ∏ècraie","üóømarbre","üñãÔ∏èardoise","ü™®gneiss","ü™®obsidienne","ü´ßponce","‚õèÔ∏èschiste","‚è≥gr√®s","üß™gypse","üçÇtourbe","‚õèÔ∏èminerai","‚¨õcharbon","üíédiamant","üåüor","ü•àargent","üü´cuivre","‚õìÔ∏èfer","ü•´√©tain","ü•âbronze","üî™acier","üß™mercure","üß™soufre","ü•õverre","üß±ciment","ü©πpl√¢tre","‚ö´goudron","‚ö´bitume","üõ¢Ô∏èp√©trole","‚õΩgaz","üõçÔ∏èplastique","üöócaoutchouc","üå≤r√©sine","üå≥s√®ve","üßºgomme"," ashes","üìúpapier","üì¶carton","üëïtissu","üëúcuir","üëòsoie","üåølin","üéãchanvre","üéçjute","üåøbambou","üß∫rotin","üåäcorail","ü©∏cendres"
      ];
      
      function parseElements(list) {
        const baseElements = { "air": "üå¨Ô∏è", "eau": "üíß", "feu": "üî•", "terre": "üåç" };
        for (const name in baseElements) {
            if (!emojis[name]) {
                emojis[name] = baseElements[name];
                allElementNames.push(name);
            }
        }
        list.forEach(item => {
          const firstLetterMatch = item.match(/[a-zA-Z√Ä-√ø]/);
          if (firstLetterMatch) {
            const index = firstLetterMatch.index;
            const emoji = item.substring(0, index).trim();
            const name = item.substring(index).trim();
            if (name && !emojis[name]) {
              emojis[name] = emoji;
              allElementNames.push(name);
            }
          }
        });
      }
      parseElements(elementsJsonContent);

      const startingElements = ["air", "eau", "feu", "terre"];
      const discovered = new Map();
      const FUSION_TOLERANCE = 50;

      // R√©f√©rences aux √©l√©ments du DOM
      const elementsList = document.getElementById("elements-list");
      const undiscoveredList = document.getElementById("undiscovered-list");
      const achievementsContent = document.getElementById("achievements-content");
      const tabDiscovered = document.getElementById("tab-discovered");
      const tabUndiscovered = document.getElementById("tab-undiscovered");
      const tabAchievements = document.getElementById("tab-achievements");
      const sortButtonsContainer = document.getElementById("sort-buttons");
      
      const workspace = document.getElementById("workspace");
      const searchInput = document.getElementById("search");
      const themeToggle = document.getElementById("themeToggle");
      const cleanWorkspaceBtn = document.getElementById("cleanWorkspaceBtn");
      const sortByAgeBtn = document.getElementById("sortByAge");
      const sortByNameBtn = document.getElementById("sortByName");
      const sortByEmojiBtn = document.getElementById("sortByEmoji");
      const sortByRandomBtn = document.getElementById("sortByRandom");
      const backgroundCanvas = document.getElementById("backgroundCanvas");
      const backgroundCtx = backgroundCanvas.getContext("2d");
      const constellationCanvas = document.getElementById("constellationCanvas");
      const constellationCtx = constellationCanvas.getContext("2d");
      const sidebar = document.getElementById("sidebar");

      let currentSortType = 'age';

      // Code pour le fond anim√© (inchang√©)
      const POINT_COUNT = 150;
      const points = [];
      function randomSpeed() { return (Math.random() - 0.5) * 0.1; }
      function initializeConstellationPoints() {
        points.length = 0;
        for(let i=0; i<POINT_COUNT; i++) {
          points.push({ x: Math.random() * constellationCanvas.width, y: Math.random() * constellationCanvas.height, vx: randomSpeed(), vy: randomSpeed(), radius: 1.5 + Math.random() * 1.5, highlighted: false });
        }
      }
      function resizeCanvas() {
        const workspaceRect = workspace.getBoundingClientRect();
        backgroundCanvas.width = workspaceRect.width;
        backgroundCanvas.height = workspaceRect.height;
        constellationCanvas.width = workspaceRect.width;
        constellationCanvas.height = workspaceRect.height;
        if(workspaceRect.width > 0) { // Ne redessine que si la zone est visible
            initializeConstellationPoints();
        }
      }
      window.addEventListener("resize", resizeCanvas);
      const gridSpacing = 30;
      function drawGrid() {
        backgroundCtx.clearRect(0, 0, backgroundCanvas.width, backgroundCanvas.height);
        const isDark = document.body.classList.contains("dark");
        backgroundCtx.fillStyle = isDark ? "rgba(255,255,255,0.1)" : "rgba(50,50,50,0.15)";
        for(let x=0; x < backgroundCanvas.width; x += gridSpacing) {
          for(let y=0; y < backgroundCanvas.height; y += gridSpacing) {
            backgroundCtx.beginPath();
            backgroundCtx.arc(x, y, 1, 0, 2 * Math.PI);
            backgroundCtx.fill();
          }
        }
      }
      const maxDistance = 100;
      function drawConstellations() {
        constellationCtx.clearRect(0, 0, constellationCanvas.width, constellationCanvas.height);
        const isDark = document.body.classList.contains("dark");
        const pointColor = isDark ? "rgba(255,255,255,0.8)" : "rgba(30,30,30,0.8)";
        const lineColor = isDark ? "rgba(255,255,255,0.3)" : "rgba(30,30,30,0.3)";
        constellationCtx.lineWidth = 1;
        points.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          if(p.x < 0 || p.x > constellationCanvas.width) p.vx = -p.vx;
          if(p.y < 0 || p.y > constellationCanvas.height) p.vy = -p.vy;
        });
        points.forEach(p => {
          constellationCtx.beginPath();
          constellationCtx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
          constellationCtx.fillStyle = p.highlighted ? "rgba(255, 255, 0, 1)" : pointColor;
          constellationCtx.shadowBlur = p.highlighted ? 15 : 0;
          constellationCtx.shadowColor = p.highlighted ? "rgba(255, 255, 0, 0.8)" : "transparent";
          constellationCtx.fill();
        });
        for(let i=0; i < POINT_COUNT; i++) {
          for(let j=i+1; j < POINT_COUNT; j++) {
            const p1 = points[i];
            const p2 = points[j];
            const dist = Math.hypot(p1.x-p2.x, p1.y-p2.y);
            if(dist < maxDistance) {
              constellationCtx.beginPath();
              constellationCtx.moveTo(p1.x, p1.y);
              constellationCtx.lineTo(p2.x, p2.y);
              constellationCtx.strokeStyle = lineColor;
              constellationCtx.stroke();
            }
          }
        }
        const floatingElements = document.querySelectorAll(".floating-element");
        floatingElements.forEach(el => {
            const elRect = el.getBoundingClientRect();
            const elCenterX = (elRect.left + elRect.width / 2) - workspace.getBoundingClientRect().left;
            const elCenterY = (elRect.top + elRect.height / 2) - workspace.getBoundingClientRect().top;
            let closestPoint = null;
            let minDistance = Infinity;
            points.forEach(p => {
                const dist = Math.hypot(elCenterX - p.x, elCenterY - p.y);
                if (dist < minDistance) {
                    minDistance = dist;
                    closestPoint = p;
                }
            });
            if (closestPoint) {
                constellationCtx.beginPath();
                constellationCtx.moveTo(elCenterX, elCenterY);
                constellationCtx.lineTo(closestPoint.x, closestPoint.y);
                constellationCtx.strokeStyle = lineColor;
                constellationCtx.lineWidth = 1;
                constellationCtx.stroke();
            }
        });
      }
      function animateBackground() {
        drawGrid();
        drawConstellations();
        requestAnimationFrame(animateBackground);
      }

      // --- NOUVEAU : Fonction pour attribuer la raret√© ---
      function assignRarities() {
        const totalElements = allElementNames.length;
        const elementsToAssign = [...allElementNames]; // Copie pour ne pas modifier l'original
        
        // M√©langer les √©l√©ments pour une attribution al√©atoire
        for (let i = elementsToAssign.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [elementsToAssign[i], elementsToAssign[j]] = [elementsToAssign[j], elementsToAssign[i]];
        }

        const numLegendary = 25;
        const numEpic = 100;
        const numRare = 300;

        let assignedCount = 0;

        // L√©gendaires
        for (let i = 0; i < numLegendary && assignedCount < totalElements; i++) {
            rarities[elementsToAssign[assignedCount]] = 'legendary';
            assignedCount++;
        }
        // √âpiques
        for (let i = 0; i < numEpic && assignedCount < totalElements; i++) {
            rarities[elementsToAssign[assignedCount]] = 'epic';
            assignedCount++;
        }
        // Rares
        for (let i = 0; i < numRare && assignedCount < totalElements; i++) {
            rarities[elementsToAssign[assignedCount]] = 'rare';
            assignedCount++;
        }
        // Communs (le reste)
        while (assignedCount < totalElements) {
            rarities[elementsToAssign[assignedCount]] = 'common';
            assignedCount++;
        }

        // Assurer que les 4 √©l√©ments de base sont "communs" pour la coh√©rence
        startingElements.forEach(name => {
            rarities[name] = 'common';
        });
      }

      function addElementToSidebar(name) {
        const el = document.createElement("div");
        el.className = "element";
        el.setAttribute("data-name", name);
        el.textContent = emojis[name] ? emojis[name] + " " + name : name;
        el.setAttribute("draggable", "true");
        
        // --- NOUVEAU : Ajouter la classe de raret√© ---
        const rarityClass = rarities[name];
        if (rarityClass) {
            el.classList.add(rarityClass);
        }

        el.addEventListener("dragstart", e => {
          e.dataTransfer.setData("text/plain", name);
          e.dataTransfer.effectAllowed = "copy";
        });
        el.addEventListener("click", () => spawnElementRandomly(name));
        elementsList.appendChild(el);
        setTimeout(() => el.classList.add('animate-in'), 10);
      }
      
      function addUndiscoveredElementToSidebar(name) {
        const el = document.createElement("div");
        el.className = "element undiscovered-element";
        el.setAttribute("data-name", name);
        el.textContent = emojis[name] ? emojis[name] + " " + name : "? " + name;
        // --- NOUVEAU : Ajouter la classe de raret√© m√™me pour les √©l√©ments non d√©couverts (gris√©s) ---
        const rarityClass = rarities[name];
        if (rarityClass) {
            el.classList.add(rarityClass);
        }
        undiscoveredList.appendChild(el);
      }

      function renderElementsList(sortType = currentSortType) {
        elementsList.innerHTML = '';
        undiscoveredList.innerHTML = '';
        currentSortType = sortType;

        document.querySelectorAll('#sort-buttons button').forEach(button => {
          button.classList.toggle('active', button.id === `sortBy${sortType.charAt(0).toUpperCase() + sortType.slice(1)}`);
        });

        let discoveredArray = Array.from(discovered.entries()).map(([name, time]) => ({ name: name, time: time, emoji: emojis[name] || '' }));
        switch (sortType) {
          case 'age': discoveredArray.sort((a, b) => a.time - b.time); break;
          case 'name': discoveredArray.sort((a, b) => a.name.localeCompare(b.name)); break;
          case 'random': discoveredArray.sort(() => Math.random() - 0.5); break;
          case 'emoji': discoveredArray.sort((a, b) => a.emoji.localeCompare(b.emoji)); break;
        }
        discoveredArray.forEach(elData => addElementToSidebar(elData.name));

        const undiscoveredNames = allElementNames.filter(name => !discovered.has(name));
        undiscoveredNames.sort((a, b) => a.localeCompare(b));
        undiscoveredNames.forEach(name => addUndiscoveredElementToSidebar(name));

        tabDiscovered.textContent = `D√©couverts (${discovered.size})`;
        tabUndiscovered.textContent = `√Ä d√©couvrir (${undiscoveredNames.length})`;
      }

      function saveDiscoveredElements() { localStorage.setItem('littleAlchemyDiscovered', JSON.stringify(Array.from(discovered.entries()))); }
      function loadDiscoveredElements() {
        const storedData = localStorage.getItem('littleAlchemyDiscovered');
        if (storedData) { JSON.parse(storedData).forEach(([name, time]) => discovered.set(name, time)); } 
        else { startingElements.forEach(name => discovered.set(name, Date.now())); }
      }

      function spawnFloatingElement(name, x, y, animate) {
        const el = document.createElement("div");
        el.className = "floating-element";
        el.textContent = emojis[name] ? emojis[name] + " " + name : name;
        el.style.left = x + "px";
        el.style.top = y + "px";
        el.setAttribute("data-name", name);
        el.setAttribute("draggable", "true");

        // --- NOUVEAU : Ajouter la classe de raret√© aux √©l√©ments flottants ---
        const rarityClass = rarities[name];
        if (rarityClass) {
            el.classList.add(rarityClass);
        }

        el.addEventListener("dragstart", e => {
          e.dataTransfer.setData("text/plain", name);
          e.dataTransfer.setData("offsetX", e.offsetX);
          e.dataTransfer.setData("offsetY", e.offsetY);
          draggingElement = el;
        });
        el.addEventListener("dragend", e => { draggingElement = null; });
        workspace.appendChild(el);
        if(animate) {
          el.classList.add("combine-animation");
          setTimeout(() => el.classList.remove("combine-animation"), 400);
        }
        return el;
      }
      
      function spawnElementRandomly(name) {
        const x = Math.random() * (workspace.clientWidth - 100);
        const y = Math.random() * (workspace.clientHeight - 40);
        spawnFloatingElement(name, x, y, true);
      }

      function combine(name1, name2) {
        const possibleResults = allElementNames.filter(name => name !== name1 && name !== name2);
        if (possibleResults.length === 0) { return allElementNames[Math.floor(Math.random() * allElementNames.length)]; }
        const randomIndex = Math.floor(Math.random() * possibleResults.length);
        return possibleResults[randomIndex];
      }

      function tryCombineWithOthers(movingEl) {
        const floatingEls = [...workspace.querySelectorAll(".floating-element")].filter(el => el !== movingEl);
        const movingRect = movingEl.getBoundingClientRect();
        for(let el of floatingEls) {
          const r = el.getBoundingClientRect();
          const overlapX = Math.abs((movingRect.left + movingRect.width/2) - (r.left + r.width/2)) < FUSION_TOLERANCE;
          const overlapY = Math.abs((movingRect.top + r.top)/2 - (r.top + r.height/2)) < FUSION_TOLERANCE;
          if(overlapX && overlapY) {
            const name1 = movingEl.getAttribute("data-name");
            const name2 = el.getAttribute("data-name");
            const result = combine(name1, name2);
            if(result) {
              const x = (movingRect.left + r.left)/2 - workspace.getBoundingClientRect().left;
              const y = (movingRect.top + r.top)/2 - workspace.getBoundingClientRect().top;
              const isNewDiscovery = !discovered.has(result);
              if(isNewDiscovery) {
                discovered.set(result, Date.now());
                saveDiscoveredElements();
                renderElementsList();
                checkAchievements('newElement', result); // V√©rifier les succ√®s apr√®s une nouvelle d√©couverte
              }
              const newEl = spawnFloatingElement(result, x, y, true);
              if (isNewDiscovery) {
                newEl.classList.add('new-element-animation');
                newEl.addEventListener('animationend', () => newEl.classList.remove('new-element-animation'), { once: true });
              }
              movingEl.remove();
              el.remove();
              checkAchievements('combinationMade'); // V√©rifier le succ√®s de la premi√®re combinaison
              checkAchievements('floatingElementsState'); // V√©rifier les succ√®s li√©s aux √©l√©ments flottants
              return true;
            }
          }
        }
        return false;
      }

      let draggingElement = null;
      workspace.addEventListener("dragover", e => { e.preventDefault(); });
      workspace.addEventListener("drop", e => {
        e.preventDefault();
        const workspaceRect = workspace.getBoundingClientRect();
        let dropX = e.clientX - workspaceRect.left;
        let dropY = e.clientY - workspaceRect.top;
        const name = e.dataTransfer.getData("text/plain");

        if (draggingElement) {
            const offsetX = parseInt(e.dataTransfer.getData("offsetX"));
            const offsetY = parseInt(e.dataTransfer.getData("offsetY"));
            draggingElement.style.left = (dropX - offsetX) + "px";
            draggingElement.style.top = (dropY - offsetY) + "px";
            tryCombineWithOthers(draggingElement);
        } else {
            let fused = false;
            for (let el of [...workspace.querySelectorAll(".floating-element")]) {
                const r = el.getBoundingClientRect();
                const elCenterX = r.left - workspaceRect.left + r.width / 2;
                const elCenterY = r.top - workspaceRect.top + r.height / 2;
                if (Math.hypot(dropX - elCenterX, dropY - elCenterY) < FUSION_TOLERANCE) {
                    const result = combine(name, el.getAttribute("data-name"));
                    if (result) {
                        const isNew = !discovered.has(result);
                        if(isNew) { discovered.set(result, Date.now()); saveDiscoveredElements(); renderElementsList(); checkAchievements('newElement', result); }
                        const newEl = spawnFloatingElement(result, elCenterX, elCenterY, true);
                        if(isNew) { newEl.classList.add('new-element-animation'); newEl.addEventListener('animationend', () => newEl.classList.remove('new-element-animation'), { once: true }); }
                        el.remove();
                        fused = true;
                        checkAchievements('combinationMade'); // V√©rifier le succ√®s de la premi√®re combinaison
                        checkAchievements('floatingElementsState'); // V√©rifier les succ√®s li√©s aux √©l√©ments flottants
                        break;
                    }
                }
            }
            if (!fused) {
                const tempEl = document.createElement("div");
                tempEl.className = "floating-element"; // Utilise la classe pour obtenir les dimensions r√©elles
                tempEl.style.visibility = "hidden"; tempEl.textContent = name;
                workspace.appendChild(tempEl);
                const elWidth = tempEl.offsetWidth; const elHeight = tempEl.offsetHeight;
                workspace.removeChild(tempEl);
                spawnFloatingElement(name, dropX - elWidth / 2, dropY - elHeight / 2);
                checkAchievements('floatingElementsState'); // V√©rifier les succ√®s li√©s aux √©l√©ments flottants
            }
        }
      });

      sidebar.addEventListener("dragover", e => { e.preventDefault(); });
      sidebar.addEventListener("drop", e => {
        e.preventDefault();
        if (draggingElement) {
          draggingElement.classList.add('disappear-animation');
          setTimeout(() => { draggingElement.remove(); }, 300);
          checkAchievements('floatingElementsState'); // V√©rifier les succ√®s li√©s aux √©l√©ments flottants
        }
      });
      
      // Listeners pour les boutons
      let themeLightTimer = null;
      let themeLightStartTime = 0;

      function toggleTheme() {
        document.body.classList.toggle("dark");
        const isDark = document.body.classList.contains("dark");
        themeToggle.textContent = isDark ? "‚ö´" : "‚ö™";
        drawGrid(); // Redessine la grille avec la nouvelle couleur
        drawConstellations(); // Redessine les constellations avec la nouvelle couleur

        if (!isDark) { // Switched to light theme
            themeLightStartTime = Date.now();
            if (themeLightTimer) clearTimeout(themeLightTimer);
            themeLightTimer = setTimeout(() => {
                // Only achieve if still in light mode after 1 minute
                if (!document.body.classList.contains("dark")) {
                    unlockAchievement('AH MES YEUX !');
                }
            }, 60 * 1000); // 1 minute in milliseconds
        } else { // Switched to dark theme
            if (themeLightTimer) {
                clearTimeout(themeLightTimer);
                themeLightTimer = null;
            }
        }
      }
      themeToggle.addEventListener("click", toggleTheme);
      
      cleanWorkspaceBtn.addEventListener("click", () => {
        [...workspace.querySelectorAll(".floating-element")].forEach(el => {
          el.classList.add('disappear-animation');
          setTimeout(() => el.remove(), 300);
        });
        checkAchievements('floatingElementsState'); // V√©rifier les succ√®s li√©s aux √©l√©ments flottants
      });
      sortByAgeBtn.addEventListener('click', () => renderElementsList('age'));
      sortByNameBtn.addEventListener('click', () => renderElementsList('name'));
      sortByEmojiBtn.addEventListener('click', () => renderElementsList('emoji'));
      sortByRandomBtn.addEventListener('click', () => renderElementsList('random'));
      
      // Logique des onglets
      function switchTab(activeTab) {
          // Hide all content areas and controls by default
          elementsList.style.display = 'none';
          undiscoveredList.style.display = 'none';
          achievementsContent.style.display = 'none';
          sortButtonsContainer.style.display = 'none';
          searchInput.style.display = 'none';

          // Deactivate all tab buttons
          tabDiscovered.classList.remove('active');
          tabUndiscovered.classList.remove('active');
          tabAchievements.classList.remove('active');

          // Activate the selected tab and show its content
          if (activeTab === 'discovered') {
              tabDiscovered.classList.add('active');
              elementsList.style.display = 'block';
              sortButtonsContainer.style.display = 'flex';
              searchInput.style.display = 'block';
          } else if (activeTab === 'undiscovered') {
              tabUndiscovered.classList.add('active');
              undiscoveredList.style.display = 'block';
          } else if (activeTab === 'achievements') {
              tabAchievements.classList.add('active');
              achievementsContent.style.display = 'flex'; // Use flex for achievements content
              renderAchievements(); // Render achievements when tab is switched to
          }
      }
      tabDiscovered.addEventListener('click', () => switchTab('discovered'));
      tabUndiscovered.addEventListener('click', () => switchTab('undiscovered'));
      tabAchievements.addEventListener('click', () => switchTab('achievements'));

      // --- Logique des Succ√®s ---
      const achievements = {
        "Premier Pas": {
          icon: "üçº",
          description: "Cr√©e ta toute premi√®re combinaison.",
          achieved: false,
          check: () => totalCombinationsMade >= 1
        },
        "Combinaison In√©dite": {
          icon: "ü™ñ",
          description: "D√©couvre un √©l√©ment √©pique.",
          achieved: false,
          check: () => {
            for (const [name] of discovered.entries()) {
              if (rarities[name] === 'epic') return true;
            }
            return false;
          }
        },
        "Roi de la combine": {
          icon: "üëë",
          description: "D√©couvre un √©l√©ment l√©gendaire.",
          achieved: false,
          check: () => {
            for (const [name] of discovered.entries()) {
              if (rarities[name] === 'legendary') return true;
            }
            return false;
          }
        },
        "Copy-Paste": {
          icon: "üìí",
          description: "Trouve 10 √©l√©ments avec le m√™me √©moji.",
          achieved: false,
          check: () => {
            const emojiCounts = {};
            for (const [name] of discovered.entries()) {
              const emoji = emojis[name];
              if (emoji) {
                emojiCounts[emoji] = (emojiCounts[emoji] || 0) + 1;
                if (emojiCounts[emoji] >= 10) return true;
              }
            }
            return false;
          }
        },
        "Famille": {
          icon: "üë©‚Äçüëß‚Äçüë¶",
          description: "Trouve \"Homme\", \"Femme\", \"Donkey Kong\".",
          achieved: false,
          check: () => discovered.has("homme") && discovered.has("femme") && discovered.has("Donkey Kong")
        },
        "Curieux Cr√©ateur": {
          icon: "üß†",
          description: "Cr√©e 10 √©l√©ments.",
          achieved: false,
          check: () => discovered.size - startingElements.length >= 10,
          progress: () => `${Math.min(10, discovered.size - startingElements.length)}/10`
        },
        "Cr√©ateur Fou": {
          icon: "üßº",
          description: "Cr√©e 100 √©l√©ments.",
          achieved: false,
          check: () => discovered.size - startingElements.length >= 100,
          progress: () => `${Math.min(100, discovered.size - startingElements.length)}/100`
        },
        "Combinateur Compulsif": {
          icon: "üíâ",
          description: "Cr√©e 1 000 √©l√©ments.",
          achieved: false,
          check: () => discovered.size - startingElements.length >= 1000,
          progress: () => `${Math.min(1000, discovered.size - startingElements.length)}/1000`
        },
        "Collectionneur": {
          icon: "üìÅ",
          description: "Cr√©e 10 min√©raux.",
          achieved: false,
          check: () => {
              const mineralList = ["Ambre", "Am√©thyste", "Ardoise", "Argent", "Argile", "Basalte", "Bitume", "Bronze", "Calcaire", "Cendres", "Charbon", "Craie", "Cristal", "Cuivre", "Diamant", "√âmeraude", "√âtain", "Fer", "Gemme", "Gneiss", "Goudron", "Granit", "Gr√®s", "Gypse", "Mercure", "Minerai", "Nacre", "Obsidienne", "Onyx", "Opale", "Or", "Pl√¢tre", "Ponce", "Quartz", "Rubis", "Sable", "Saphir", "Schiste", "Silex", "Soufre", "Topaze", "Tourbe", "Verre", "Zircon"];
              let count = 0;
              for (const mineral of mineralList) {
                  if (discovered.has(mineral.toLowerCase())) { // Convert to lowercase for consistent checking
                      count++;
                  }
              }
              return count >= 10;
          },
          progress: () => {
              const mineralList = ["Ambre", "Am√©thyste", "Ardoise", "Argent", "Argile", "Basalte", "Bitume", "Bronze", "Calcaire", "Cendres", "Charbon", "Craie", "Cristal", "Cuivre", "Diamant", "√âmeraude", "√âtain", "Fer", "Gemme", "Gneiss", "Goudron", "Granit", "Gr√®s", "Gypse", "Mercure", "Minerai", "Nacre", "Obsidienne", "Onyx", "Opale", "Or", "Pl√¢tre", "Ponce", "Quartz", "Rubis", "Sable", "Saphir", "Schiste", "Silex", "Soufre", "Topaze", "Tourbe", "Verre", "Zircon"];
              let count = 0;
              for (const mineral of mineralList) {
                  if (discovered.has(mineral.toLowerCase())) {
                      count++;
                  }
              }
              return `${Math.min(10, count)}/10`;
          }
        },
        "Alcoolique": {
          icon: "üç∑",
          description: "Trouve l'√©l√©ment \"Alcool\".",
          achieved: false,
          check: () => discovered.has("alcool")
        },
        "Flexeur": {
          icon: "üí≤",
          description: "Met un √©l√©ment de chaque raret√© dans la constellation.",
          achieved: false,
          check: () => {
            const floatingElements = [...workspace.querySelectorAll(".floating-element")];
            const foundRarities = new Set();
            floatingElements.forEach(el => {
              const name = el.getAttribute("data-name");
              const rarity = rarities[name];
              if (rarity) {
                foundRarities.add(rarity);
              }
            });
            return foundRarities.has('common') && foundRarities.has('rare') && foundRarities.has('epic') && foundRarities.has('legendary');
          }
        },
        "Jambon": {
          icon: "üçñ",
          description: "Trouve \"Jambon\".",
          achieved: false,
          check: () => discovered.has("jambon")
        },
        "Imposteur": {
          icon: "üî™",
          description: "Trouve l'√©l√©ment \"Among Us\".",
          achieved: false,
          check: () => discovered.has("Among Us")
        },
        "AH MES YEUX !": {
          icon: "üëÄ",
          description: "Met le th√®me clair pendant 1 minute.",
          achieved: false,
          // Check logic is handled by the themeToggle event listener
          check: () => false // This achievement is checked by the timer, not directly here
        },
        "Ma√Ætre de la cr√©ation": {
          icon: "üë©‚Äçüç≥",
          description: "Trouve 3 concepts.",
          achieved: false,
          check: () => {
            const conceptsList = ["Absorption", "Acc√©l√©ration", "Accord", "Action", "Acoustique", "√Çge", "Aide", "Aileron", "Alliance", "Amour", "Amplitude", "Amiti√©", "Anarchie", "Angle", "Anniversaire", "Anticipation", "Application", "Aptitude", "Arc-en-ciel", "Arch√©ologie", "Argent (monnaie)", "Armure", "Art", "Artisanat", "Ast√©ro√Øde", "Astronomie", "Athl√©tisme", "Atome", "Attente", "Aube", "Autobiographie", "Automne", "Avion (concept de vol)", "Axe", "Bact√©rie", "Balance", "Bande", "Banque", "Basketball", "Batterie", "B√©n√©diction", "Besoin", "Bien", "Billet", "Biologie", "Biosph√®re", "Bitume", "Boisson", "Bois", "Bouton", "Boxe", "Brume", "B√ªche", "C√¢ble", "Caf√©", "Calculatrice", "Camping", "Canal", "Capacit√©", "Capitalisme", "Catastrophe", "C√©l√©bration", "Cellule", "Cendres", "Cercle", "Certitude", "Cha√Æne", "Chaleur", "Changement", "Chant", "Chaos", "Chasse", "Chasse (gibier)", "Ch√¢timent", "Champ", "Champagne", "Chanvre", "Charni√®re", "Ch√¢teau", "Chimie", "Choix", "Ch√¥mage", "Ch≈ìur", "Chronom√®tre", "Cigale", "Ciment", "Cin√©ma", "Circonf√©rence", "Circuit", "Citadine", "Civilisation", "Clavier", "Cl√© (musique)", "Cl√© (cryptographie)", "Cl√© (physique)", "Cloud", "Coiffure", "Col", "Col√®re", "Collaboration", "Collection", "Colorant", "Com√®te", "Commerce", "Comm√©moration", "Communisme", "Compas", "Comp√©tence", "Comp√©tition", "Compr√©hension", "Concert", "Conduction", "Conductivit√©", "C√¥ne", "Conflit", "Connaissance", "Connexion", "Conscience", "Cons√©quence", "Constellation", "Consommation", "Context", "Continuit√©", "Coop√©ration", "Corail", "Corde", "Cosmos", "Coton", "Couleur", "Courage", "Courbe", "Cr√©ativit√©", "Cr√©dit", "Cr√©puscule", "Crise", "Croissance", "Cro√ªte", "Cruche", "Culte", "Culpabilit√©", "Culture", "Curry", "Cuill√®re", "Cycle", "Cylindre", "Cybers√©curit√©", "Danse", "D√©fense (protection)", "D√©fense (animal)", "D√©fi", "D√©go√ªt", "D√©jeuner", "D√©mocratie", "Densit√©", "D√©pendance", "D√©sastre", "D√©s√©quilibre", "D√©sespoir", "D√©sir", "Destin", "Destruction", "Dette", "D√©veloppement", "Diam√®tre", "Diffusion", "Diffraction", "Diode", "Direction", "Disque (informatique)", "Distance", "Dissonance", "Document", "Dogme", "Don (cadeau)", "Don (talent)", "Doute", "Douleur", "Droit", "Dune", "Duplex", "√âchec", "√âchange", "√âcharpe", "√âcologie", "√âconomie", "√âcran", "√âcoute", "√âcrou", "√âcosyst√®me", "√âgalit√©", "√âl√©phant", "√ânergie", "Enfer", "Engrenage", "Enregistrement", "Ensemble", "Entropie", "Envie", "√âpice", "√âpingle", "√âquateur", "√âquerre", "√âquilibre", "Escalade", "Esclavage", "Esprit", "Essai", "Essieu", "Est", "Estomac", "√âtain", "√âternit√©", "√âthique", "√âtincelle", "√âtoile", "√âtoile filante", "√âtrier", "√âvolution", "√âveil", "√âv√©nement", "Explosion", "Extinction", "Fade", "Faible", "Famille", "Fant√¥me", "F√©e", "Fen√™tre", "Fermeture", "Fermoir", "Fermeture", "F√™te", "Fibre", "Fichier", "Finance", "Fin", "Fiert√©", "Fil", "Film", "Flacon", "Flamme", "Flore", "Foie", "Folklore", "Force", "For√™t", "Fortune (chance)", "Fortune (richesse)", "Fosse", "Foudre", "Fraternit√©", "Fr√©quence", "Froid", "Fum√©e", "Fusion", "Futur", "Galaxie", "Galet", "Gamme", "Gaz", "G√®ne", "G√©n√©tique", "G√©ographie", "G√©ologie", "Givre", "Glace", "Gla√ßon", "Glaise", "Gnome", "Goutte", "Gouvernement", "Gr√¢ce", "Gravier", "Gravitation", "Grille", "Grotte", "Groupe", "Guerre", "Gu√™tre", "Hache", "Haine", "Halo", "Harmonie", "Hasard", "H√©lice", "H√©r√©sie", "H√©ritage", "Hi√©rarchie", "Histoire", "Horloge", "Humide", "Hydro√©lectricit√©", "√éle", "Imagination", "Imprimante", "Imp√¥t", "Individu", "Informatique", "Ing√©nierie", "Injecteur", "Innovation", "Inconscient", "Insecte", "Instant", "Instrument", "Intelligence", "Interf√©rence", "Internet", "Intuition", "Investissement", "Ivoire", "Jambe", "Jardin", "Jaune", "Jeu", "Jeu de soci√©t√©", "Joint", "Jours", "Jubil√©", "Juge", "Justice", "Jute", "K√©ratine", "Kyoto", "Lac", "L√¢chet√©", "Laiton", "Lampe", "Lave", "Lecture", "L√©gende", "L√©gal", "L√©gat", "Libert√©", "Lichen", "Lien", "Ligne", "Limite", "Lin", "Liquide", "Lit", "Litt√©rature", "Logique", "Longueur", "Lumi√®re", "Lune", "Machine", "Maillon", "Main", "Mal", "Malchance", "Mal√©diction", "Malheur", "Mammouth", "Mangue", "Maniement", "Manque", "Manuel", "Marbre", "March√©", "Marche", "Masque", "Masse", "Mat√©riel", "Mat√©riau", "M√©canique", "M√©lange", "M√©lodie", "M√©moire", "Mensonge", "Mer", "M√©t√©ore", "M√©t√©orologie", "M√®tre", "Microphone", "Microscope", "Midi", "Minerai", "Minuit", "Mis√®re", "Missile", "Module", "Mol√©cule", "Momentum", "Monarchie", "Monde", "Monnaie", "Mois", "Montagne", "Mouvement", "Mouill√©", "Mousse", "Musique", "Mythe", "Nage", "Naissance", "Narration", "N√©buleuse", "Nid", "Niveau", "Nord", "Nord-ouest", "Nostalgie", "Nouvelle", "Noyau", "Nuage (m√©t√©o)", "Nuage (informatique)", "Num√©rique", "Nutriment", "Nuit", "Objectif", "Obscurit√©", "Oc√©an", "Oc√©anographie", "Odeur", "Odyss√©e", "Oeuf (nourriture)", "Offre", "Onde", "Onde (son)", "Onglet", "Op√©ration", "Opportunit√©", "Optique", "Optimisme", "Ordre", "Organe", "Organisation", "Os", "Ou√Øe", "Ouest", "Ours", "Pacte", "Paille", "Pal√©ontologie", "Panneau", "Papier", "Paradis", "Particule", "Pass√©", "Patrimoine", "Paume", "Pav√©", "P√™che", "P√©ch√©", "Peinture", "Pens√©e", "Performance", "Perte", "Pessimisme", "P√©trole", "Phase", "Philosophie", "Photon", "Pied", "Pierre", "Pi√®ce", "Pi√®ge", "Piston", "Plan√®te", "Plancton", "Planche", "Plante", "Plastique", "Pleur", "Pluie", "Plume", "Poids", "Point", "Poison", "Polarisation", "Pollen", "Polygone", "Pompe", "Pont", "Population", "Porte", "Porte-monnaie", "Potentiel", "Poussi√®re", "Pauvret√©", "Po√©sie", "Pression", "Pr√©sent", "Pr√™t", "Principe", "Prisme", "Production", "Profondeur", "Progr√®s", "Promesse", "Propulsion", "Prot√©ine", "Proton", "Psychanalyse", "Psychologie", "Puissance", "Pulpe", "Punition", "Pyramide", "Quantit√©", "Quantum", "Quatuor", "Queue", "Randonn√©e", "R√¢pe", "Raret√©", "Raison", "R√©action", "R√©acteur", "R√©alit√©", "Recherche", "R√©cital", "R√©colte", "R√©compense", "Rectangle", "R√©daction", "R√©demption", "R√©flexion", "R√©flexion (optique)", "R√©frig√©rateur", "R√©fraction", "R√©gression", "R√®gle", "R√®gle (math√©matique)", "Relation", "Religion", "Rem√®de", "Repas", "R√©ponse", "Repos", "Repr√©sentation", "R√©publique", "R√©seau", "R√©sine", "R√©sistivit√©", "Ressort", "Restaurant", "R√©sultat", "R√™ve", "R√©veil", "R√©v√©lation", "R√©volution", "Rhum", "Rhinoc√©ros", "Rhythm", "Richesses", "Rire", "Rite", "Rivi√®re", "Roche", "Romance", "Roman", "Rondelle", "Roseau", "Ros√©e", "Rotin", "Rouille", "Roue", "Route", "Ruban", "Ruine", "Rythme", "Sablier", "Sabot", "Sac √† dos", "Sagesse", "Salaire", "Salive", "Salut", "Saison", "Sanctuaire", "Sant√©", "Sarment", "Satellite", "Satisfaction", "Sauce", "Sauge", "Savoir-faire", "Sciure", "Sculpture", "Sec", "Secret", "Seconde", "Serment", "Service", "Si√®cle", "Silence", "Silicium", "Sirop", "Situation", "Socialisme", "Sociologie", "Soie", "Soir", "Solide", "Sommeil", "Son", "Sonde", "Sorcellerie", "Sortie", "Souche", "Source", "Sud", "Sud-Est", "Sud-Ouest", "Sucre", "Succ√®s", "Sueur", "Surprise", "Syst√®me", "Tableau", "Tablier", "Taco", "Talent", "Tasse", "Taux", "Technologie", "T√©l√©phone", "T√©lescope", "T√©l√©vision", "Temp√©rature", "Temple", "Temps", "Tension", "Testament", "Th√©", "Th√©√¢tre", "Th√®me", "Thermodynamique", "Tissu", "Toile", "Tonnerre", "Tore", "Tornade", "Toucher", "Tournevis", "Traction", "Tracteur", "Tradition", "Trafic", "Train", "Transition", "Transport", "Travail", "Trait√©", "Tremblement", "Triangle", "Tricot", "Trombone", "Tronc", "Tsunami", "Tuile", "Turbine", "Tyrannie", "Uranium", "Usine", "Utilisation", "Vall√©e", "Valeur", "Valve", "Vapeur", "Vecteur", "V√©hicule", "Vent", "Verre", "Vertu", "Vie", "Vitesse", "Vid√©o", "Vin", "Vinaigre", "Virus", "Vis", "Viscosit√©", "Vision", "Vitre", "Voile", "Voiture", "Voix", "Volcan", "Volume", "Voyage", "V√™tement", "Weekend", "Zodiaque"];
            let count = 0;
            for (const concept of conceptsList) {
                if (discovered.has(concept.toLowerCase())) {
                    count++;
                }
            }
            return count >= 3;
          },
          progress: () => {
            const conceptsList = ["Absorption", "Acc√©l√©ration", "Accord", "Action", "Acoustique", "√Çge", "Aide", "Aileron", "Alliance", "Amour", "Amplitude", "Amiti√©", "Anarchie", "Angle", "Anniversaire", "Anticipation", "Application", "Aptitude", "Arc-en-ciel", "Arch√©ologie", "Argent (monnaie)", "Armure", "Art", "Artisanat", "Ast√©ro√Øde", "Astronomie", "Athl√©tisme", "Atome", "Attente", "Aube", "Autobiographie", "Automne", "Avion (concept de vol)", "Axe", "Bact√©rie", "Balance", "Bande", "Banque", "Basketball", "Batterie", "B√©n√©diction", "Besoin", "Bien", "Billet", "Biologie", "Biosph√®re", "Bitume", "Boisson", "Bois", "Bouton", "Boxe", "Brume", "B√ªche", "C√¢ble", "Caf√©", "Calculatrice", "Camping", "Canal", "Capacit√©", "Capitalisme", "Catastrophe", "C√©l√©bration", "Cellule", "Cendres", "Cercle", "Certitude", "Cha√Æne", "Chaleur", "Changement", "Chant", "Chaos", "Chasse", "Chasse (gibier)", "Ch√¢timent", "Champ", "Champagne", "Chanvre", "Charni√®re", "Ch√¢teau", "Chimie", "Choix", "Ch√¥mage", "Ch≈ìur", "Chronom√®tre", "Cigale", "Ciment", "Cin√©ma", "Circonf√©rence", "Circuit", "Citadine", "Civilisation", "Clavier", "Cl√© (musique)", "Cl√© (cryptographie)", "Cl√© (physique)", "Cloud", "Coiffure", "Col", "Col√®re", "Collaboration", "Collection", "Colorant", "Com√®te", "Commerce", "Comm√©moration", "Communisme", "Compas", "Comp√©tence", "Comp√©tition", "Compr√©hension", "Concert", "Conduction", "Conductivit√©", "C√¥ne", "Conflit", "Connaissance", "Connexion", "Conscience", "Cons√©quence", "Constellation", "Consommation", "Context", "Continuit√©", "Coop√©ration", "Corail", "Corde", "Cosmos", "Coton", "Couleur", "Courage", "Courbe", "Cr√©ativit√©", "Cr√©dit", "Cr√©puscule", "Crise", "Croissance", "Cro√ªte", "Cruche", "Culte", "Culpabilit√©", "Culture", "Curry", "Cuill√®re", "Cycle", "Cylindre", "Cybers√©curit√©", "Danse", "D√©fense (protection)", "D√©fense (animal)", "D√©fi", "D√©go√ªt", "D√©jeuner", "D√©mocratie", "Densit√©", "D√©pendance", "D√©sastre", "D√©s√©quilibre", "D√©sespoir", "D√©sir", "Destin", "Destruction", "Dette", "D√©veloppement", "Diam√®tre", "Diffusion", "Diffraction", "Diode", "Direction", "Disque (informatique)", "Distance", "Dissonance", "Document", "Dogme", "Don (cadeau)", "Don (talent)", "Doute", "Douleur", "Droit", "Dune", "Duplex", "√âchec", "√âchange", "√âcharpe", "√âcologie", "√âconomie", "√âcran", "√âcoute", "√âcrou", "√âcosyst√®me", "√âgalit√©", "√âl√©phant", "√ânergie", "Enfer", "Engrenage", "Enregistrement", "Ensemble", "Entropie", "Envie", "√âpice", "√âpingle", "√âquateur", "√âquerre", "√âquilibre", "Escalade", "Esclavage", "Esprit", "Essai", "Essieu", "Est", "Estomac", "√âtain", "√âternit√©", "√âthique", "√âtincelle", "√âtoile", "√âtoile filante", "√âtrier", "√âvolution", "√âveil", "√âv√©nement", "Explosion", "Extinction", "Fade", "Faible", "Famille", "Fant√¥me", "F√©e", "Fen√™tre", "Fermeture", "Fermoir", "Fermeture", "F√™te", "Fibre", "Fichier", "Finance", "Fin", "Fiert√©", "Fil", "Film", "Flacon", "Flamme", "Flore", "Foie", "Folklore", "Force", "For√™t", "Fortune (chance)", "Fortune (richesse)", "Fosse", "Foudre", "Fraternit√©", "Fr√©quence", "Froid", "Fum√©e", "Fusion", "Futur", "Galaxie", "Galet", "Gamme", "Gaz", "G√®ne", "G√©n√©tique", "G√©ographie", "G√©ologie", "Givre", "Glace", "Gla√ßon", "Glaise", "Gnome", "Goutte", "Gouvernement", "Gr√¢ce", "Gravier", "Gravitation", "Grille", "Grotte", "Groupe", "Guerre", "Gu√™tre", "Hache", "Haine", "Halo", "Harmonie", "Hasard", "H√©lice", "H√©r√©sie", "H√©ritage", "Hi√©rarchie", "Histoire", "Horloge", "Humide", "Hydro√©lectricit√©", "√éle", "Imagination", "Imprimante", "Imp√¥t", "Individu", "Informatique", "Ing√©nierie", "Injecteur", "Innovation", "Inconscient", "Insecte", "Instant", "Instrument", "Intelligence", "Interf√©rence", "Internet", "Intuition", "Investissement", "Ivoire", "Jambe", "Jardin", "Jaune", "Jeu", "Jeu de soci√©t√©", "Joint", "Jours", "Jubil√©", "Juge", "Justice", "Jute", "K√©ratine", "Kyoto", "Lac", "L√¢chet√©", "Laiton", "Lampe", "Lave", "Lecture", "L√©gende", "L√©gal", "L√©gat", "Libert√©", "Lichen", "Lien", "Ligne", "Limite", "Lin", "Liquide", "Lit", "Litt√©rature", "Logique", "Longueur", "Lumi√®re", "Lune", "Machine", "Maillon", "Main", "Mal", "Malchance", "Mal√©diction", "Malheur", "Mammouth", "Mangue", "Maniement", "Manque", "Manuel", "Marbre", "March√©", "Marche", "Masque", "Masse", "Mat√©riel", "Mat√©riau", "M√©canique", "M√©lange", "M√©lodie", "M√©moire", "Mensonge", "Mer", "M√©t√©ore", "M√©t√©orologie", "M√®tre", "Microphone", "Microscope", "Midi", "Minerai", "Minuit", "Mis√®re", "Missile", "Module", "Mol√©cule", "Momentum", "Monarchie", "Monde", "Monnaie", "Mois", "Montagne", "Mouvement", "Mouill√©", "Mousse", "Musique", "Mythe", "Nage", "Naissance", "Narration", "N√©buleuse", "Nid", "Niveau", "Nord", "Nord-ouest", "Nostalgie", "Nouvelle", "Noyau", "Nuage (m√©t√©o)", "Nuage (informatique)", "Num√©rique", "Nutriment", "Nuit", "Objectif", "Obscurit√©", "Oc√©an", "Oc√©anographie", "Odeur", "Odyss√©e", "Oeuf (nourriture)", "Offre", "Onde", "Onde (son)", "Onglet", "Op√©ration", "Opportunit√©", "Optique", "Optimisme", "Ordre", "Organe", "Organisation", "Os", "Ou√Øe", "Ouest", "Ours", "Pacte", "Paille", "Pal√©ontologie", "Panneau", "Papier", "Paradis", "Particule", "Pass√©", "Patrimoine", "Paume", "Pav√©", "P√™che", "P√©ch√©", "Peinture", "Pens√©e", "Performance", "Perte", "Pessimisme", "P√©trole", "Phase", "Philosophie", "Photon", "Pied", "Pierre", "Pi√®ce", "Pi√®ge", "Piston", "Plan√®te", "Plancton", "Planche", "Plante", "Plastique", "Pleur", "Pluie", "Plume", "Poids", "Point", "Poison", "Polarisation", "Pollen", "Polygone", "Pompe", "Pont", "Population", "Porte", "Porte-monnaie", "Potentiel", "Poussi√®re", "Pauvret√©", "Po√©sie", "Pression", "Pr√©sent", "Pr√™t", "Principe", "Prisme", "Production", "Profondeur", "Progr√®s", "Promesse", "Propulsion", "Prot√©ine", "Proton", "Psychanalyse", "Psychologie", "Puissance", "Pulpe", "Punition", "Pyramide", "Quantit√©", "Quantum", "Quatuor", "Queue", "Randonn√©e", "R√¢pe", "Raret√©", "Raison", "R√©action", "R√©acteur", "R√©alit√©", "Recherche", "R√©cital", "R√©colte", "R√©compense", "Rectangle", "R√©daction", "R√©demption", "R√©flexion", "R√©flexion (optique)", "R√©frig√©rateur", "R√©fraction", "R√©gression", "R√®gle", "R√®gle (math√©matique)", "Relation", "Religion", "Rem√®de", "Repas", "R√©ponse", "Repos", "Repr√©sentation", "R√©publique", "R√©seau", "R√©sine", "R√©sistivit√©", "Ressort", "Restaurant", "R√©sultat", "R√™ve", "R√©veil", "R√©v√©lation", "R√©volution", "Rhum", "Rhinoc√©ros", "Rhythm", "Richesses", "Rire", "Rite", "Rivi√®re", "Roche", "Romance", "Roman", "Rondelle", "Roseau", "Ros√©e", "Rotin", "Rouille", "Roue", "Route", "Ruban", "Ruine", "Rythme", "Sablier", "Sabot", "Sac √† dos", "Sagesse", "Salaire", "Salive", "Salut", "Saison", "Sanctuaire", "Sant√©", "Sarment", "Satellite", "Satisfaction", "Sauce", "Sauge", "Savoir-faire", "Sciure", "Sculpture", "Sec", "Secret", "Seconde", "Serment", "Service", "Si√®cle", "Silence", "Silicium", "Sirop", "Situation", "Socialisme", "Sociologie", "Soie", "Soir", "Solide", "Sommeil", "Son", "Sonde", "Sorcellerie", "Sortie", "Souche", "Source", "Sud", "Sud-Est", "Sud-Ouest", "Sucre", "Succ√®s", "Sueur", "Surprise", "Syst√®me", "Tableau", "Tablier", "Taco", "Talent", "Tasse", "Taux", "Technologie", "T√©l√©phone", "T√©lescope", "T√©l√©vision", "Temp√©rature", "Temple", "Temps", "Tension", "Testament", "Th√©", "Th√©√¢tre", "Th√®me", "Thermodynamique", "Tissu", "Toile", "Tonnerre", "Tore", "Tornade", "Toucher", "Tournevis", "Traction", "Tracteur", "Tradition", "Trafic", "Train", "Transition", "Transport", "Travail", "Trait√©", "Tremblement", "Triangle", "Tricot", "Trombone", "Tronc", "Tsunami", "Tuile", "Turbine", "Tyrannie", "Uranium", "Usine", "Utilisation", "Vall√©e", "Valeur", "Valve", "Vapeur", "Vecteur", "V√©hicule", "Vent", "Verre", "Vertu", "Vie", "Vitesse", "Vid√©o", "Vin", "Vinaigre", "Virus", "Vis", "Viscosit√©", "Vision", "Vitre", "Voile", "Voiture", "Voix", "Volcan", "Volume", "Voyage", "V√™tement", "Weekend", "Zodiaque"];
            let count = 0;
            for (const concept of conceptsList) {
                if (discovered.has(concept.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(3, count)}/3`;
          }
        },
        "Le meilleur jeu": {
          icon: "üå≥",
          description: "Trouve \"Minecraft\".",
          achieved: false,
          check: () => discovered.has("Minecraft")
        },
        "Gamer pro": {
          icon: "ü™¥",
          description: "Trouve 5 jeux vid√©os.",
          achieved: false,
          check: () => {
            const gamesList = ["Apex Legends", "Assassin's Creed", "Asteroids", "Among Us", "Borderlands", "Call of Duty", "Candy Crush", "Cyberpunk 2077", "Dark Souls", "Destiny", "Detroit: Become Human", "Donkey Kong", "Doom", "Elden Ring", "Elder Scrolls", "FIFA", "Final Fantasy", "Fortnite", "Fallout", "God of War", "Grand Theft Auto", "Gran Turismo", "Guitar Hero", "Halo", "Half-Life", "Hitman", "Just Dance", "Mario Kart", "Minecraft", "Mortal Kombat", "NBA 2K", "Overwatch", "Pac-Man", "Pok√©mon", "Pong", "Portal", "Red Dead Redemption", "Resident Evil", "Rocket League", "Skyrim", "Silent Hill", "Snake", "Space Invaders", "Street Fighter", "Super Mario", "Tetris", "The Legend of Zelda", "The Witcher", "World of Warcraft"];
            let count = 0;
            for (const game of gamesList) {
                if (discovered.has(game.toLowerCase())) {
                    count++;
                }
            }
            return count >= 5;
          },
          progress: () => {
            const gamesList = ["Apex Legends", "Assassin's Creed", "Asteroids", "Among Us", "Borderlands", "Call of Duty", "Candy Crush", "Cyberpunk 2077", "Dark Souls", "Destiny", "Detroit: Become Human", "Donkey Kong", "Doom", "Elden Ring", "Elder Scrolls", "FIFA", "Final Fantasy", "Fortnite", "Fallout", "God of War", "Grand Theft Auto", "Gran Turismo", "Guitar Hero", "Halo", "Half-Life", "Hitman", "Just Dance", "Mario Kart", "Minecraft", "Mortal Kombat", "NBA 2K", "Overwatch", "Pac-Man", "Pok√©mon", "Pong", "Portal", "Red Dead Redemption", "Resident Evil", "Rocket League", "Skyrim", "Silent Hill", "Snake", "Space Invaders", "Street Fighter", "Super Mario", "Tetris", "The Legend of Zelda", "The Witcher", "World of Warcraft"];
            let count = 0;
            for (const game of gamesList) {
                if (discovered.has(game.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(5, count)}/5`;
          }
        },
        "Alter ego": {
          icon: "üí∞",
          description: "Trouve \"pauvret√©\" et \"richesse\".",
          achieved: false,
          check: () => discovered.has("pauvret√©") && discovered.has("richesse")
        },
        "Globe-Trotteur": {
          icon: "üåè",
          description: "Trouve 3 villes.",
          achieved: false,
          check: () => {
            const citiesList = ["Amsterdam", "Ath√®nes", "Bangkok", "Berlin", "Bogota", "Bruxelles", "Buenos Aires", "Casablanca", "Caracas", "Copenhague", "Dakar", "Dhaka", "Doha", "Dublin", "Duba√Ø", "Gen√®ve", "Hano√Ø", "Helsinki", "Istanbul", "Jakarta", "J√©rusalem", "Johannesburg", "Karachi", "La Havane", "Lagos", "Le Caire", "Lima", "Lisbonne", "Londres", "Madrid", "Manille", "Mexico", "Moscou", "Nairobi", "New Delhi", "New York", "Oslo", "Paris", "Reykjavik", "Rio de Janeiro", "Riyad", "Rome", "Santiago", "S√©oul", "Shanghai", "Singapour", "Stockholm", "Sydney", "Tokyo", "Toronto", "Vienne"];
            let count = 0;
            for (const city of citiesList) {
                if (discovered.has(city.toLowerCase())) {
                    count++;
                }
            }
            return count >= 3;
          },
          progress: () => {
            const citiesList = ["Amsterdam", "Ath√®nes", "Bangkok", "Berlin", "Bogota", "Bruxelles", "Buenos Aires", "Casablanca", "Caracas", "Copenhague", "Dakar", "Dhaka", "Doha", "Dublin", "Duba√Ø", "Gen√®ve", "Hano√Ø", "Helsinki", "Istanbul", "Jakarta", "J√©rusalem", "Johannesburg", "Karachi", "La Havane", "Lagos", "Le Caire", "Lima", "Lisbonne", "Londres", "Madrid", "Manille", "Mexico", "Moscou", "Nairobi", "New Delhi", "New York", "Oslo", "Paris", "Reykjavik", "Rio de Janeiro", "Riyad", "Rome", "Santiago", "S√©oul", "Shanghai", "Singapour", "Stockholm", "Sydney", "Tokyo", "Toronto", "Vienne"];
            let count = 0;
            for (const city of citiesList) {
                if (discovered.has(city.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(3, count)}/3`;
          }
        },
        "Tour du monde": {
          icon: "üåê",
          description: "Trouve 10 villes.",
          achieved: false,
          check: () => {
            const citiesList = ["Amsterdam", "Ath√®nes", "Bangkok", "Berlin", "Bogota", "Bruxelles", "Buenos Aires", "Casablanca", "Caracas", "Copenhague", "Dakar", "Dhaka", "Doha", "Dublin", "Duba√Ø", "Gen√®ve", "Hano√Ø", "Helsinki", "Istanbul", "Jakarta", "J√©rusalem", "Johannesburg", "Karachi", "La Havane", "Lagos", "Le Caire", "Lima", "Lisbonne", "Londres", "Madrid", "Manille", "Mexico", "Moscou", "Nairobi", "New Delhi", "New York", "Oslo", "Paris", "Reykjavik", "Rio de Janeiro", "Riyad", "Rome", "Santiago", "S√©oul", "Shanghai", "Singapour", "Stockholm", "Sydney", "Tokyo", "Toronto", "Vienne"];
            let count = 0;
            for (const city of citiesList) {
                if (discovered.has(city.toLowerCase())) {
                    count++;
                }
            }
            return count >= 10;
          },
          progress: () => {
            const citiesList = ["Amsterdam", "Ath√®nes", "Bangkok", "Berlin", "Bogota", "Bruxelles", "Buenos Aires", "Casablanca", "Caracas", "Copenhague", "Dakar", "Dhaka", "Doha", "Dublin", "Duba√Ø", "Gen√®ve", "Hano√Ø", "Helsinki", "Istanbul", "Jakarta", "J√©rusalem", "Johannesburg", "Karachi", "La Havane", "Lagos", "Le Caire", "Lima", "Lisbonne", "Londres", "Madrid", "Manille", "Mexico", "Moscou", "Nairobi", "New Delhi", "New York", "Oslo", "Paris", "Reykjavik", "Rio de Janeiro", "Riyad", "Rome", "Santiago", "S√©oul", "Shanghai", "Singapour", "Stockholm", "Sydney", "Tokyo", "Toronto", "Vienne"];
            let count = 0;
            for (const city of citiesList) {
                if (discovered.has(city.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(10, count)}/10`;
          }
        },
        "Salade de fruits": {
          icon: "üçé",
          description: "Trouve 10 fruits.",
          achieved: false,
          check: () => {
            const fruitsList = ["Ananas", "Avocat", "Banane", "Cerise", "Citron", "Fraise", "Kiwi", "Mangue", "Myrtille", "Noix de coco", "Orange", "Past√®que", "P√™che", "Poire", "Pomme", "Raisin"];
            let count = 0;
            for (const fruit of fruitsList) {
                if (discovered.has(fruit.toLowerCase())) {
                    count++;
                }
            }
            return count >= 10;
          },
          progress: () => {
            const fruitsList = ["Ananas", "Avocat", "Banane", "Cerise", "Citron", "Fraise", "Kiwi", "Mangue", "Myrtille", "Noix de coco", "Orange", "Past√®que", "P√™che", "Poire", "Pomme", "Raisin"];
            let count = 0;
            for (const fruit of fruitsList) {
                if (discovered.has(fruit.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(10, count)}/10`;
          }
        },
        "Salade de l√©gumes ?": {
          icon: "üçÜ",
          description: "Trouve 10 l√©gumes.",
          achieved: false,
          check: () => {
            const vegetablesList = ["Ail", "Aubergine", "Brocoli", "Carotte", "Chou", "Concombre", "Gingembre", "Laitue", "Oignon", "Piment", "Pomme de terre", "Tomate"];
            let count = 0;
            for (const veg of vegetablesList) {
                if (discovered.has(veg.toLowerCase())) {
                    count++;
                }
            }
            return count >= 10;
          },
          progress: () => {
            const vegetablesList = ["Ail", "Aubergine", "Brocoli", "Carotte", "Chou", "Concombre", "Gingembre", "Laitue", "Oignon", "Piment", "Pomme de terre", "Tomate"];
            let count = 0;
            for (const veg of vegetablesList) {
                if (discovered.has(veg.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(10, count)}/10`;
          }
        },
        "√âleveur": {
          icon: "üß∫",
          description: "Cr√©e 10 animaux.",
          achieved: false,
          check: () => {
            const animalsList = ["Abeille", "Aigle", "Alligator", "Araign√©e", "Baleine", "Belette", "B√™te", "Blaireau", "Castor", "Cerf", "Chameau", "Chat", "Chauve-souris", "Chenille", "Cheval", "Chimpanz√©", "Chouette", "Chrysalide", "Cigale", "Cobra", "Coccinelle", "Colombe", "Corail", "Corbeau", "Coyote", "Crabe", "Cr√©vette", "Criquet", "Crocodile", "Cypr√©e", "Dauphin", "Dinosaure", "Dragon", "√âcureuil", "√âl√©phant", "√âl√©phant (d√©fense)", "Escargot", "Fennec", "Flamant rose", "Fourmi", "Grenouille", "Grillon", "Grizzly", "Gorille", "Harfang", "H√©risson", "Hibou", "Hippopotame", "Hu√Ætre", "Kangourou", "Koala", "Lama", "Lapin", "L√©zard", "Lion", "Loup", "Loutre", "Mammouth", "Manchot", "Mite", "Mouche", "Mouffette", "Moule", "Moustique", "Mouton", "Okapi", "Oisillon", "Oiseau", "Panda", "Papillon", "Perroquet", "Pieuvre", "Pigeon", "Poisson", "Porc", "Poussin", "Poulet", "Puce", "Raton laveur", "Requin", "Renne", "Rhinoc√©ros", "Renard", "Sauterelle", "Scarab√©e", "Scorpion", "Serpent", "Singe", "Souris", "Taureau", "Tigre", "Tortue", "Ver", "Vache", "Z√®bre", "Zombie", "Loup-garou", "Vampire"];
            let count = 0;
            for (const animal of animalsList) {
                if (discovered.has(animal.toLowerCase())) {
                    count++;
                }
            }
            return count >= 10;
          },
          progress: () => {
            const animalsList = ["Abeille", "Aigle", "Alligator", "Araign√©e", "Baleine", "Belette", "B√™te", "Blaireau", "Castor", "Cerf", "Chameau", "Chat", "Chauve-souris", "Chenille", "Cheval", "Chimpanz√©", "Chouette", "Chrysalide", "Cigale", "Cobra", "Coccinelle", "Colombe", "Corail", "Corbeau", "Coyote", "Crabe", "Cr√©vette", "Criquet", "Crocodile", "Cypr√©e", "Dauphin", "Dinosaure", "Dragon", "√âcureuil", "√âl√©phant", "√âl√©phant (d√©fense)", "Escargot", "Fennec", "Flamant rose", "Fourmi", "Grenouille", "Grillon", "Grizzly", "Gorille", "Harfang", "H√©risson", "Hibou", "Hippopotame", "Hu√Ætre", "Kangourou", "Koala", "Lama", "Lapin", "L√©zard", "Lion", "Loup", "Loutre", "Mammouth", "Manchot", "Mite", "Mouche", "Mouffette", "Moule", "Moustique", "Mouton", "Okapi", "Oisillon", "Oiseau", "Panda", "Papillon", "Perroquet", "Pieuvre", "Pigeon", "Poisson", "Porc", "Poussin", "Poulet", "Puce", "Raton laveur", "Requin", "Renne", "Rhinoc√©ros", "Renard", "Sauterelle", "Scarab√©e", "Scorpion", "Serpent", "Singe", "Souris", "Taureau", "Tigre", "Tortue", "Ver", "Vache", "Z√®bre", "Zombie", "Loup-garou", "Vampire"];
            let count = 0;
            for (const animal of animalsList) {
                if (discovered.has(animal.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(10, count)}/10`;
          }
        },
        "Artiste Conceptuel": {
          icon: "üß¨",
          description: "Cr√©e 5 √©motions.",
          achieved: false,
          check: () => {
            const emotionsList = ["Amour", "Amiti√©", "Col√®re", "Culpabilit√©", "D√©go√ªt", "D√©sespoir", "Douleur", "Espoir", "Fiert√©", "Haine", "Honte", "Joie", "L√¢chet√©", "Peur", "Plaisir", "Surprise", "Tristesse"];
            let count = 0;
            for (const emotion of emotionsList) {
                if (discovered.has(emotion.toLowerCase())) {
                    count++;
                }
            }
            return count >= 5;
          },
          progress: () => {
            const emotionsList = ["Amour", "Amiti√©", "Col√®re", "Culpabilit√©", "D√©go√ªt", "D√©sespoir", "Douleur", "Espoir", "Fiert√©", "Haine", "Honte", "Joie", "L√¢chet√©", "Peur", "Plaisir", "Surprise", "Tristesse"];
            let count = 0;
            for (const emotion of emotionsList) {
                if (discovered.has(emotion.toLowerCase())) {
                    count++;
                }
            }
            return `${Math.min(5, count)}/5`;
          }
        },
        "Cr√©ateur de Vie": {
          icon: "ü•ê",
          description: "Cr√©e un √™tre vivant.",
          achieved: false,
          check: () => {
            const livingBeingsList = ["humain", "insecte", "licorne", "loup-garou", "papillon", "poussin", "sir√®ne", "ver", "z√®bre", "homme"];
            for (const livingBeing of livingBeingsList) {
                if (discovered.has(livingBeing.toLowerCase())) {
                    return true;
                }
            }
            return false;
          }
        },
        "Troph√©e de chocolat": {
          icon: "üç´",
          description: "Trouve tous les √©l√©ments communs.",
          achieved: false,
          check: () => {
            const commonElements = allElementNames.filter(name => rarities[name] === 'common');
            return commonElements.every(name => discovered.has(name));
          },
          progress: () => {
            const commonElements = allElementNames.filter(name => rarities[name] === 'common');
            const discoveredCommon = commonElements.filter(name => discovered.has(name)).length;
            return `${discoveredCommon}/${commonElements.length}`;
          }
        },
        "Troph√©e de bronze": {
          icon: "üß°",
          description: "Trouve tous les √©l√©ments rares.",
          achieved: false,
          check: () => {
            const rareElements = allElementNames.filter(name => rarities[name] === 'rare');
            return rareElements.every(name => discovered.has(name));
          },
          progress: () => {
            const rareElements = allElementNames.filter(name => rarities[name] === 'rare');
            const discoveredRare = rareElements.filter(name => discovered.has(name)).length;
            return `${discoveredRare}/${rareElements.length}`;
          }
        },
        "Troph√©e d'am√©thyste": {
          icon: "üíú",
          description: "Trouve tous les √©l√©ments √©piques.",
          achieved: false,
          check: () => {
            const epicElements = allElementNames.filter(name => rarities[name] === 'epic');
            return epicElements.every(name => discovered.has(name));
          },
          progress: () => {
            const epicElements = allElementNames.filter(name => rarities[name] === 'epic');
            const discoveredEpic = epicElements.filter(name => discovered.has(name)).length;
            return `${discoveredEpic}/${epicElements.length}`;
          }
        },
        "Troph√©e de crystal": {
          icon: "üíô",
          description: "Trouve tous les √©l√©ments l√©gendaires.",
          achieved: false,
          check: () => {
            const legendaryElements = allElementNames.filter(name => rarities[name] === 'legendary');
            return legendaryElements.every(name => discovered.has(name));
          },
          progress: () => {
            const legendaryElements = allElementNames.filter(name => rarities[name] === 'legendary');
            const discoveredLegendary = legendaryElements.filter(name => discovered.has(name)).length;
            return `${discoveredLegendary}/${legendaryElements.length}`;
          }
        },
        "Troph√©e de platine": {
          icon: "üèÜ",
          description: "Trouve tous les √©l√©ments.",
          achieved: false,
          check: () => discovered.size === allElementNames.length,
          progress: () => `${discovered.size}/${allElementNames.length}`
        },
        "Fin ?": {
          icon: "‚ôæÔ∏è",
          description: "Cr√©e la fin, l'univers, le chaos, l'esprit, et le doute.",
          achieved: false,
          check: () => discovered.has("fin") && discovered.has("univers") && discovered.has("chaos") && discovered.has("esprit") && discovered.has("doute")
        }
      };

      let totalCombinationsMade = 0; // Compteur pour "Premier Pas"

      function saveAchievements() {
        const achievedStates = {};
        for (const key in achievements) {
          achievedStates[key] = achievements[key].achieved;
        }
        localStorage.setItem('littleAlchemyAchievements', JSON.stringify(achievedStates));
        localStorage.setItem('littleAlchemyTotalCombinations', totalCombinationsMade);
      }

      function loadAchievements() {
        const storedAchievements = localStorage.getItem('littleAlchemyAchievements');
        if (storedAchievements) {
          const parsed = JSON.parse(storedAchievements);
          for (const key in parsed) {
            if (achievements[key]) {
              achievements[key].achieved = parsed[key];
            }
          }
        }
        const storedCombinations = localStorage.getItem('littleAlchemyTotalCombinations');
        if (storedCombinations) {
            totalCombinationsMade = parseInt(storedCombinations, 10);
        }
      }

      function unlockAchievement(achievementName) {
        if (!achievements[achievementName].achieved) {
          achievements[achievementName].achieved = true;
          saveAchievements();
          renderAchievements(); // Re-render to show unlocked status
          // Optionnel: Ajouter une notification visuelle pour le succ√®s d√©bloqu√©
          console.log(`Succ√®s d√©bloqu√© : ${achievementName}`);
        }
      }

      function checkAchievements(triggerType, data = null) {
        let anyAchievementUnlocked = false;
        for (const key in achievements) {
          if (!achievements[key].achieved) {
            let shouldUnlock = false;
            switch (key) {
                case "Premier Pas":
                    if (triggerType === 'combinationMade') {
                        shouldUnlock = achievements[key].check();
                    }
                    break;
                case "Combinaison In√©dite":
                case "Roi de la combine":
                    if (triggerType === 'newElement' && data) {
                        const rarity = rarities[data];
                        if ((key === "Combinaison In√©dite" && rarity === 'epic') || (key === "Roi de la combine" && rarity === 'legendary')) {
                            shouldUnlock = achievements[key].check();
                        }
                    }
                    break;
                case "Copy-Paste":
                case "Famille":
                case "Curieux Cr√©ateur":
                case "Cr√©ateur Fou":
                case "Combinateur Compulsif":
                case "Collectionneur":
                case "Alcoolique":
                case "Ma√Ætre de la cr√©ation":
                case "Le meilleur jeu":
                case "Gamer pro":
                case "Alter ego":
                case "Globe-Trotteur":
                case "Tour du monde":
                case "Salade de fruits":
                case "Salade de l√©gumes ?":
                case "√âleveur":
                case "Artiste Conceptuel":
                case "Cr√©ateur de Vie":
                case "Troph√©e de chocolat":
                case "Troph√©e de bronze":
                case "Troph√©e d'am√©thyste":
                case "Troph√©e de crystal":
                case "Troph√©e de platine":
                case "Fin ?":
                    if (triggerType === 'newElement' || triggerType === 'combinationMade') { // Check on any new discovery or combination
                        shouldUnlock = achievements[key].check();
                    }
                    break;
                case "Flexeur":
                    if (triggerType === 'floatingElementsState') {
                        shouldUnlock = achievements[key].check();
                    }
                    break;
                case "Jambon":
                case "Imposteur":
                    if (triggerType === 'newElement' && data) {
                        if ((key === "Jambon" && data === "jambon") || (key === "Imposteur" && data === "Among Us")) {
                            shouldUnlock = achievements[key].check();
                        }
                    }
                    break;
                case "AH MES YEUX !":
                    // This is handled by the themeToggle event listener directly
                    break;
            }

            if (shouldUnlock) {
                unlockAchievement(key);
                anyAchievementUnlocked = true;
            }
          }
        }
        if (anyAchievementUnlocked && tabAchievements.classList.contains('active')) {
            renderAchievements(); // Re-render achievements if any were unlocked and tab is active
        }
      }

      function renderAchievements() {
        achievementsContent.innerHTML = '';
        for (const key in achievements) {
          const achievement = achievements[key];
          const itemDiv = document.createElement('div');
          itemDiv.className = 'achievement-item';
          if (achievement.achieved) {
            itemDiv.classList.add('achieved');
          }

          const iconSpan = document.createElement('span');
          iconSpan.className = 'icon';
          iconSpan.textContent = achievement.icon;
          itemDiv.appendChild(iconSpan);

          const detailsDiv = document.createElement('div');
          detailsDiv.className = 'details';

          const titleP = document.createElement('p');
          titleP.className = 'title';
          titleP.textContent = key;
          detailsDiv.appendChild(titleP);

          const descriptionP = document.createElement('p');
          descriptionP.className = 'description';
          descriptionP.textContent = achievement.description;
          detailsDiv.appendChild(descriptionP);

          if (achievement.progress && !achievement.achieved) {
            const progressP = document.createElement('p');
            progressP.className = 'progress';
            progressP.textContent = `Progr√®s : ${achievement.progress()}`;
            detailsDiv.appendChild(progressP);
          }

          itemDiv.appendChild(detailsDiv);
          achievementsContent.appendChild(itemDiv);
        }
      }

      // Initialisation finale
      assignRarities(); // NOUVEAU : attribue les raret√©s au chargement
      loadDiscoveredElements();
      loadAchievements(); // Charger les succ√®s au d√©marrage
      renderElementsList('age');
      switchTab('discovered');
      themeToggle.textContent = document.body.classList.contains("dark") ? "‚ö´" : "‚ö™";
      resizeCanvas();
      animateBackground();

      // Initial check for achievements that depend on initial state (e.g., already discovered elements)
      checkAchievements('initialLoad');
    });
  </script>
</body>
</html>

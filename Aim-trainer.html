<!DOCTYPE html>
<html>
<head>
<title id="page-title" data-en="Aim Trainer Pro" data-fr="Entraînement à la visée">Aim Trainer Pro</title>
<style>
  body {
    overflow: hidden;
    margin: 0;
    background-color: #282b30;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    color: #55ff75;
  }

  #controls {
    margin-bottom: 20px;
    display: flex;
    gap: 15px;
    align-items: center;
  }

  #controls button {
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    background-color: #424549;
    color: #55ff75;
    border: 1px solid #55ff75;
    border-radius: 5px;
    transition: background-color 0.3s ease, transform 0.1s ease;
  }

  #controls button:hover {
    background-color: #1e2124;
    transform: translateY(-2px);
  }

  #stats {
    display: flex;
    gap: 30px;
    margin-bottom: 15px;
    font-size: 1.1em;
    font-weight: bold;
    color: #55ff75;
  }

  #game-container {
    position: relative;
    width: 90vw;
    height: 70vh;
    border: 2px solid #55ff75;
    background-color: #1e2124;
    overflow: hidden;
    cursor: crosshair;
  }

  .target {
    position: absolute;
    background-color: #55ff75;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.1s ease;
  }

  .target:hover {
    background-color: #45cc60;
  }

  /* Target sizes based on difficulty */
  .easy {
    width: 70px;
    height: 70px;
  }
  .medium {
    width: 50px;
    height: 50px;
  }
  .hard {
    width: 30px;
    height: 30px;
  }

  /* Explosion effect */
  .explosion {
    position: absolute;
    width: 60px;
    height: 60px;
    background-color: white;
    border-radius: 50%;
    animation: explode 0.3s forwards;
    pointer-events: none;
    transform: translate(-50%, -50%);
  }

  @keyframes explode {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) scale(1.5);
      opacity: 0;
    }
  }
  
  #language-button {
    position: fixed;
    top: 10px;
    left: 10px;
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    z-index: 10008;
    pointer-events: all;
    transition: none;
    animation: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  }

  #language-button img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>
</head>
<body lang="en">
<button id="language-button" onclick="translatePage()">
    <img id="flag-icon" src="https://raw.githubusercontent.com/Tristanox/Tristanox-tools/refs/heads/Thumbnails/France-flag.png" alt="Traduire en Français">
</button>

<div id="controls">
  <button id="easyMode" data-en="Easy" data-fr="Facile">Easy</button>
  <button id="mediumMode" data-en="Normal" data-fr="Normal">Normal</button>
  <button id="hardMode" data-en="Hard" data-fr="Difficile">Hard</button>
</div>

<div id="stats">
  <div id="accuracy-display" data-en="Accuracy" data-fr="Précision">Accuracy: 100%</div>
  <div id="reaction-time-display" data-en="Average reaction time" data-fr="Temps de réaction moyen">Average reaction time: 0 ms</div>
  <div id="hit-miss-display" data-en="Hits/Misses" data-fr="Réussies/Ratées">Hits: 0 / Misses: 0</div>
</div>

<div id="game-container"></div>

<script>
  const gameContainer = document.getElementById('game-container');
  const accuracyDisplay = document.getElementById('accuracy-display');
  const reactionTimeDisplay = document.getElementById('reaction-time-display');
  const hitMissDisplay = document.getElementById('hit-miss-display');
  const pageTitle = document.getElementById('page-title');

  const easyModeBtn = document.getElementById('easyMode');
  const mediumModeBtn = document.getElementById('mediumMode');
  const hardModeBtn = document.getElementById('hardMode');

  const gunSound = new Audio('https://github.com/Tristanox/GUN/raw/refs/heads/main/submachine-gun-79846%20(1).mp3');
  gunSound.preload = 'auto';

  let totalClicks = 0;
  let successfulHits = 0;
  let missedClicks = 0;
  let targetSpawnTime = 0;
  let totalReactionTime = 0;
  let currentTargetSize = 50;
  let currentLanguage = 'en';

  function translatePage() {
    currentLanguage = currentLanguage === 'en' ? 'fr' : 'en';
    const flagIcon = document.getElementById('flag-icon');

    if (currentLanguage === 'fr') {
        flagIcon.src = 'https://raw.githubusercontent.com/Tristanox/Tristanox-tools/refs/heads/Thumbnails/UK.png';
        flagIcon.alt = 'Translate to English';
        document.body.lang = 'fr';
    } else {
        flagIcon.src = 'https://raw.githubusercontent.com/Tristanox/Tristanox-tools/refs/heads/Thumbnails/France-flag.png';
        flagIcon.alt = 'Traduire en Français';
        document.body.lang = 'en';
    }

    document.querySelectorAll('[data-en]').forEach(element => {
        const translation = element.dataset[currentLanguage];
        if (translation) {
            if (element.tagName === 'BUTTON') {
                element.innerText = translation;
            }
        }
    });
    
    pageTitle.innerText = pageTitle.dataset[currentLanguage];

    updateAccuracy();
    updateReactionTime();
    updateHitMissCount();
  }

  function updateAccuracy() {
    const accuracyBaseText = accuracyDisplay.dataset[currentLanguage];
    if (totalClicks === 0) {
      accuracyDisplay.textContent = `${accuracyBaseText}: 100%`;
    } else {
      const accuracy = (successfulHits / totalClicks) * 100;
      accuracyDisplay.textContent = `${accuracyBaseText}: ${accuracy.toFixed(2)}%`;
    }
  }

  function updateReactionTime() {
    const reactionTimeBaseText = reactionTimeDisplay.dataset[currentLanguage];
    if (successfulHits === 0) {
      reactionTimeDisplay.textContent = `${reactionTimeBaseText}: 0 ms`;
    } else {
      const averageReactionTime = totalReactionTime / successfulHits;
      reactionTimeDisplay.textContent = `${reactionTimeBaseText}: ${averageReactionTime.toFixed(0)} ms`;
    }
  }

  function updateHitMissCount() {
    const hitMissBaseText = hitMissDisplay.dataset[currentLanguage];
    if (currentLanguage === 'en') {
        hitMissDisplay.textContent = `Hits: ${successfulHits} / Misses: ${missedClicks}`;
    } else {
        hitMissDisplay.textContent = `Réussies: ${successfulHits} / Ratées: ${missedClicks}`;
    }
  }

  function createTarget() {
    const existingTarget = document.querySelector('.target');
    if (existingTarget) {
      existingTarget.remove();
    }

    const target = document.createElement('div');
    target.classList.add('target');
    target.classList.add(getDifficultyClass(currentTargetSize));

    const containerWidth = gameContainer.offsetWidth;
    const containerHeight = gameContainer.offsetHeight;

    const randomX = Math.random() * (containerWidth - currentTargetSize);
    const randomY = Math.random() * (containerHeight - currentTargetSize);

    target.style.left = `${randomX}px`;
    target.style.top = `${randomY}px`;

    target.addEventListener('click', (event) => {
      event.stopPropagation();

      gunSound.currentTime = 0;
      gunSound.play().catch(e => console.error("Error playing sound:", e));

      const reactionTime = Date.now() - targetSpawnTime;
      totalReactionTime += reactionTime;
      successfulHits++;
      totalClicks++;

      const explosion = document.createElement('div');
      explosion.classList.add('explosion');
      explosion.style.left = `${event.clientX - gameContainer.getBoundingClientRect().left}px`;
      explosion.style.top = `${event.clientY - gameContainer.getBoundingClientRect().top}px`;
      gameContainer.appendChild(explosion);

      setTimeout(() => {
        explosion.remove();
      }, 300);

      target.remove();
      createTarget();
      updateAccuracy();
      updateReactionTime();
      updateHitMissCount();
    });

    gameContainer.appendChild(target);
    targetSpawnTime = Date.now();
  }

  function getDifficultyClass(size) {
    if (size === 70) return 'easy';
    if (size === 50) return 'medium';
    if (size === 30) return 'hard';
    return 'medium';
  }

  gameContainer.addEventListener('click', () => {
    if (document.querySelector('.target')) {
      totalClicks++;
      missedClicks++;
      updateAccuracy();
      updateReactionTime();
      updateHitMissCount();
    }
  });

  easyModeBtn.addEventListener('click', () => {
    currentTargetSize = 70;
    resetGame();
  });

  mediumModeBtn.addEventListener('click', () => {
    currentTargetSize = 50;
    resetGame();
  });

  hardModeBtn.addEventListener('click', () => {
    currentTargetSize = 30;
    resetGame();
  });

  function resetGame() {
    totalClicks = 0;
    successfulHits = 0;
    missedClicks = 0;
    totalReactionTime = 0;
    updateAccuracy();
    updateReactionTime();
    updateHitMissCount();
    createTarget();
  }
  
  document.addEventListener('DOMContentLoaded', (event) => {
      currentLanguage = 'en';
      document.body.lang = 'en';
      document.getElementById('flag-icon').src = 'https://raw.githubusercontent.com/Tristanox/Tristanox-tools/refs/heads/Thumbnails/France-flag.png';
      document.getElementById('flag-icon').alt = 'Traduire en Français';
      
      updateAccuracy();
      updateReactionTime();
      updateHitMissCount();
      createTarget();
  });
</script>

</body>
</html>

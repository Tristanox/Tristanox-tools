<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surcharge de Stimulation MAXIMALE !</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #282b30; /* Fond gris foncé */
            overflow: hidden;
            position: relative;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="10" fill="magenta" stroke="white" stroke-width="2"/></svg>') 16 16, auto;
            transition: filter 0.1s ease-out, background-color 0.1s ease-out; /* Ajout transition pour le fond */
        }
        #clickCounter {
            position: absolute;
            top: 20px;
            left: 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.8em;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
            z-index: 200;
        }
        #levelCounter { /* Nouveau style pour le compteur de niveau */
            position: absolute;
            top: 60px; /* En dessous du compteur de clics */
            left: 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5em;
            color: #FFD700; /* Or */
            text-shadow: 0 0 5px #FFD700, 0 0 10px #FFD700;
            z-index: 200;
        }
        #autoStimulationButton {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            font-size: 1em;
            font-family: 'Press Start 2P', cursive;
            background-color: #00BFFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 0 10px #00BFFF;
            transition: background-color 0.2s, box-shadow 0.2s;
            z-index: 200;
        }
        #autoStimulationButton.active {
            background-color: #FF4500;
            box-shadow: 0 0 15px #FF4500;
        }
        /* Style pour le bouton d'autostimulation désactivé */
        #autoStimulationButton:disabled {
            background-color: #555; /* Couleur grisée */
            box-shadow: none;
            cursor: not-allowed;
            color: #bbb;
        }
        #stimulationButton {
            padding: 20px 40px;
            font-size: 2em;
            cursor: pointer;
            background-color: #ff00ff;
            color: white;
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 20px #ff00ff;
            transition: transform 0.1s ease-out;
            z-index: 100;
            position: relative;
        }
        #stimulationButton:active {
            transform: scale(0.95);
        }
        .event-text, .text-3d-popup { /* Ajout de transform pour le centrage */
            position: absolute;
            font-size: 1.5em;
            color: white;
            opacity: 0;
            animation: fadeOutUp 2s forwards;
            pointer-events: none;
            z-index: 60;
            text-shadow: 0 0 10px white, 0 0 20px magenta;
            transform: translate(-50%, -50%); /* Centrage */
        }

        /* Nouveau: Texte 3D Pop-up */
        .text-3d-popup {
            font-size: 3em; /* Plus grand pour l'impact */
            color: #fff;
            text-shadow:
                -3px -3px 0 #00f,
                3px -3px 0 #0f0,
                -3px 3px 0 #f00,
                3px 3px 0 #ff0,
                0 0 15px #fff,
                0 0 30px #0ff;
            transform: translate(-50%, -50%) translateZ(0); /* Force la 3D et centrage */
            animation: popup3D 1.5s forwards;
        }
        @keyframes popup3D {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) translateY(50px) rotateX(90deg); }
            30% { opacity: 1; transform: translate(-50%, -50%) scale(1.1) translateY(0px) rotateX(0deg); }
            70% { opacity: 1; transform: translate(-50%, -50%) scale(1) translateY(-10px) rotateX(0deg); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8) translateY(-100px) rotateX(-90deg); }
        }

        .event-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: expandFade 1s forwards;
            pointer-events: none;
            z-index: 60;
            box-shadow: 0 0 15px currentColor;
        }
        .event-image {
            position: absolute;
            max-width: 100px;
            max-height: 100px;
            opacity: 0;
            animation: fadeInOut 2s forwards;
            pointer-events: none;
            z-index: 60;
        }
        .pokemon-image {
            position: absolute;
            width: 150px;
            height: auto;
            opacity: 0;
            animation: fadeInOutPokemon 3s forwards;
            pointer-events: none;
            z-index: 50;
            filter: drop-shadow(0 0 5px blue) drop-shadow(0 0 10px red);
        }
        .pokeball-image {
            position: absolute;
            width: 100px;
            height: auto;
            opacity: 0;
            animation: spinAndFade 3s forwards;
            pointer-events: none;
            z-index: 55;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7));
        }
        .bouncing-shape {
            position: absolute;
            background-color: #00ffff;
            box-shadow: 0 0 20px #00ffff;
            pointer-events: none;
            z-index: 70;
        }
        .bouncing-ball {
            border-radius: 50%;
        }
        .bouncing-square {
            border-radius: 0;
        }
        .bouncing-oval {
            border-radius: 50%;
            width: 100px;
            height: 60px;
        }

        .laser-beam {
            position: absolute;
            background: linear-gradient(to right, rgba(255,0,0,0) 0%, rgba(255,0,0,1) 50%, rgba(255,0,0,0) 100%);
            height: 10px;
            width: 100vw;
            opacity: 0;
            animation: sweepLaser 2s forwards;
            pointer-events: none;
            z-index: 90;
        }
        .laser-beam.vertical {
            width: 10px;
            height: 100vh;
            background: linear-gradient(to bottom, rgba(255,0,0,0) 0%, rgba(255,0,0,1) 50%, rgba(255,0,0,0) 100%);
        }
        .particle {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%);
            animation: explodeParticle 1s forwards;
            pointer-events: none;
            z-index: 80;
        }
        .custom-particle {
            position: absolute;
            background-color: yellow;
            border-radius: 50%;
            opacity: 0;
            animation: customParticleAnim 2s forwards;
            pointer-events: none;
            z-index: 10;
            box-shadow: 0 0 5px currentColor, 0 0 10px currentColor;
        }

        /* Nouveau: Particule géométrique */
        .geometric-particle {
            position: absolute;
            background-color: currentColor;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0) rotate(0deg);
            animation: explodeGeometric 1.5s forwards;
            pointer-events: none;
            z-index: 80;
        }
        /* Styles pour les formes (ajoutés par JS) */
        .geometric-particle.square { border-radius: 0; }
        .geometric-particle.triangle { clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
        .geometric-particle.diamond { transform: translate(-50%, -50%) scale(0) rotate(45deg); } /* losange */
        @keyframes explodeGeometric {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5) rotate(var(--initial-rot, 0deg)); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(2) translateX(var(--rand-x)) translateY(var(--rand-y)) rotate(var(--final-rot, 720deg)); }
        }

        /* Nouveau: Ligne lumineuse traçante */
        .tracing-line {
            position: absolute;
            background: linear-gradient(to right, transparent, currentColor, transparent);
            height: 3px;
            width: 0;
            opacity: 0;
            animation: traceLine 2s forwards;
            pointer-events: none;
            z-index: 95;
            box-shadow: 0 0 10px currentColor;
        }
        .tracing-line.vertical {
            width: 3px;
            height: 0;
            background: linear-gradient(to bottom, transparent, currentColor, transparent);
            animation: traceLineVertical 2s forwards;
        }
        .tracing-line.diagonal-tlbr { /* top-left to bottom-right */
            width: 5px; height: 5px; /* point de départ */
            background: currentColor;
            animation: traceLineDiagonalTLBR 2s forwards;
            transform-origin: top left;
        }
        .tracing-line.diagonal-trbl { /* top-right to bottom-left */
            width: 5px; height: 5px;
            background: currentColor;
            animation: traceLineDiagonalTRBL 2s forwards;
            transform-origin: top right;
        }

        @keyframes traceLine {
            0% { width: 0; opacity: 0; }
            10% { opacity: 1; width: 50vw; }
            90% { opacity: 1; width: 100vw; }
            100% { opacity: 0; width: 100vw; }
        }
        @keyframes traceLineVertical {
            0% { height: 0; opacity: 0; }
            10% { opacity: 1; height: 50vh; }
            90% { opacity: 1; height: 100vh; }
            100% { opacity: 0; height: 100vh; }
        }
        /* Animations pour les diagonales (implémentées via JS car plus complexe) */

        /* Nouveau: Onde sonore visuelle */
        .sound-wave {
            position: absolute;
            border-radius: 50%;
            border: 5px solid currentColor;
            opacity: 0;
            animation: expandWave 1s forwards;
            pointer-events: none;
            z-index: 60;
            box-shadow: 0 0 20px currentColor;
        }
        @keyframes expandWave {
            0% { transform: scale(0); opacity: 1; border-width: 5px; }
            100% { transform: scale(2); opacity: 0; border-width: 0px; }
        }

        /* Nouveau: Pluie de caractères ASCII */
        .ascii-char {
            position: absolute;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2em;
            color: #00ff00;
            opacity: 0;
            animation: asciiRain 3s forwards;
            pointer-events: none;
            z-index: 40;
            text-shadow: 0 0 5px #00ff00;
        }
        @keyframes asciiRain {
            0% { opacity: 0; transform: translateY(-50px); }
            10% { opacity: 1; }
            100% { opacity: 0; transform: translateY(100vh); }
        }

        /* Nouveau: Effet tunnel */
        .tunnel-effect {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            animation: tunnelZoom 0.5s forwards;
            pointer-events: none;
            z-index: 150;
        }
        @keyframes tunnelZoom {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* Nouveau: Mini-icônes "réactions" */
        .reaction-icon {
            position: absolute;
            font-size: 2em; /* Ou taille de l'image */
            opacity: 0;
            animation: floatUpAndFade 2s forwards;
            pointer-events: none;
            z-index: 70;
        }
        @keyframes floatUpAndFade {
            0% { opacity: 0; transform: translateY(0) scale(0.5); }
            20% { opacity: 1; transform: translateY(-20px) scale(1); }
            80% { opacity: 1; transform: translateY(-80px) scale(0.9); }
            100% { opacity: 0; transform: translateY(-100px) scale(0.7); }
        }

        /* Nouveau: Flash monochromatique */
        .monochromatic-flash {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            opacity: 0;
            animation: flashScreen 0.2s forwards;
            pointer-events: none;
            z-index: 180;
        }
        @keyframes flashScreen {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* Nouveau: Bruit blanc/rose visuel */
        .noise-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFF+oEAAAAGHRSTlMABQoLDxQWGh0eHyAhJCYoKw0gH75jAAAAKElEQVRYw2NgGAWjYBSMgCgYv+B/xYxNhoGjYBhQkQxQ4QxQYQRQ4QxQYARQ4QwAFwQCAZ0gAAAAAElFTkSuQmCC'); /* Petit motif de bruit */
            background-size: 4px 4px; /* Ajuste la taille du grain */
            opacity: 0;
            animation: noiseFade 0.5s forwards;
            pointer-events: none;
            z-index: 160;
        }
        @keyframes noiseFade {
            0% { opacity: 0; }
            50% { opacity: 0.15; } /* Légèrement visible */
            100% { opacity: 0; }
        }

        /* Nouveau: Effet de distorsion de l'écran */
        .distort-active {
            animation: distortEffect 0.5s forwards;
        }
        @keyframes distortEffect {
            0% { transform: scale(1, 1); filter: hue-rotate(0deg); }
            25% { transform: scale(1.05, 0.95); filter: hue-rotate(45deg); }
            50% { transform: scale(0.95, 1.05); filter: hue-rotate(90deg); }
            75% { transform: scale(1.02, 0.98); filter: hue-rotate(135deg); }
            100% { transform: scale(1, 1); filter: hue-rotate(0deg); }
        }

        /* Nouveau: Effet de vibration du bouton */
        .button-vibrate {
            animation: vibrateButton 0.1s infinite;
        }
        @keyframes vibrateButton {
            0% { transform: translate(1px, 1px); }
            25% { transform: translate(-1px, -2px); }
            50% { transform: translate(-3px, 0px); }
            75% { transform: translate(1px, 2px); }
            100% { transform: translate(1px, -1px); }
        }

        /* Nouveau: Effet de pulsation lumineuse */
        .pulse-light {
            animation: pulseLight 0.8s infinite alternate;
        }
        @keyframes pulseLight {
            0% { box-shadow: 0 0 10px currentColor; }
            100% { box-shadow: 0 0 30px currentColor, 0 0 50px currentColor; }
        }

        /* CSS Filters */
        .filter-sepia { filter: sepia(100%); }
        .filter-contrast { filter: contrast(200%); }
        .filter-saturate { filter: saturate(400%); }

        /* Glitch Effect */
        .glitch-active { animation: glitchEffect 0.3s infinite linear; transform-origin: center center; }
        @keyframes glitchEffect {
            0% { transform: skewX(0deg); } 25% { transform: skewX(10deg); filter: hue-rotate(90deg); }
            50% { transform: skewX(-10deg); } 75% { transform: skewX(5deg); filter: hue-rotate(180deg); }
            100% { transform: skewX(0deg); }
        }

        /* Screen Shake Effect */
        .shake-active { animation: screenShake 0.1s infinite; }
        @keyframes screenShake {
            0% { transform: translate(1px, 1px) rotate(0deg); } 25% { transform: translate(-1px, -2px) rotate(-1deg); }
            50% { transform: translate(-3px, 0px) rotate(1deg); } 75% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -1px) rotate(-1deg); }
        }

        /* Fireworks */
        .firework-particle {
            position: absolute;
            background: radial-gradient(white 0%, yellow 30%, orange 60%, transparent 100%);
            border-radius: 50%;
            opacity: 0;
            animation: explodeFirework 1s forwards;
            pointer-events: none;
            z-index: 85;
        }
        @keyframes explodeFirework {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(1.5) translateX(var(--fire-x)) translateY(var(--fire-y)); opacity: 0; }
        }

        /* Neon Shapes */
        .neon-shape {
            position: absolute;
            background-color: transparent;
            border: 2px solid;
            box-shadow: 0 0 5px currentColor, 0 0 15px currentColor, 0 0 30px currentColor;
            opacity: 0;
            animation: neonFade 2s forwards;
            pointer-events: none;
            z-index: 65;
        }
        @keyframes neonFade {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.8); }
        }

        /* Giphy GIF */
        .giphy-gif {
            position: absolute;
            max-width: 200px;
            height: auto;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            opacity: 0;
            animation: fadeInOutGif 4s forwards;
            pointer-events: none;
            z-index: 75;
        }
        @keyframes fadeInOutGif {
            0% { opacity: 0; transform: scale(0.7) rotate(0deg); }
            20% { opacity: 1; transform: scale(1) rotate(5deg); }
            80% { opacity: 1; transform: scale(1) rotate(-5deg); }
            100% { opacity: 0; transform: scale(0.7) rotate(0deg); }
        }

        /* Existing Keyframes */
        @keyframes fadeOutUp { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-50px); } }
        @keyframes expandFade { from { transform: scale(0); opacity: 1; } to { transform: scale(2); opacity: 0; } }
        @keyframes fadeInOut { 0% { opacity: 0; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.5); } }
        @keyframes fadeInOutPokemon { 0% { opacity: 0; transform: scale(0.8) rotate(0deg); } 25% { opacity: 1; transform: scale(1.1) rotate(5deg); } 75% { opacity: 1; transform: scale(1.1) rotate(-5deg); } 100% { opacity: 0; transform: scale(0.8) rotate(0deg); } }
        @keyframes explodeParticle {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(2) translateX(var(--rand-x)) translateY(var(--rand-y)); }
        }
        @keyframes customParticleAnim {
            0% { opacity: 0; transform: scale(0) rotate(0deg); }
            20% { opacity: 1; transform: scale(1) rotate(180deg); }
            80% { opacity: 1; transform: scale(0.8) rotate(360deg); }
            100% { opacity: 0; transform: scale(0.5); }
        }
        @keyframes spinAndFade {
            0% { opacity: 0; transform: scale(0) rotateY(0deg); }
            20% { opacity: 1; transform: scale(1) rotateY(360deg); }
            80% { opacity: 1; transform: scale(1) rotateY(720deg); }
            100% { opacity: 0; transform: scale(0.5) rotateY(1080deg); }
        }

        /* Nouveau: Expanding Grid */
        .expanding-grid-cell {
            position: absolute;
            opacity: 0;
            animation: expandGrid 0.8s forwards;
            pointer-events: none;
            z-index: 110;
        }
        @keyframes expandGrid {
            0% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.5); }
        }

        /* Nouveau: Confetti Burst */
        .confetti-particle {
            position: absolute;
            border-radius: 2px;
            opacity: 0;
            animation: confettiFall 1.5s forwards;
            pointer-events: none;
            z-index: 130;
        }
        @keyframes confettiFall {
            0% { opacity: 1; transform: translate(0, -50px) rotate(0deg); }
            100% { opacity: 0; transform: translate(var(--rand-x), 100vh) rotate(720deg); }
        }

        /* Nouveau: Screen Flash (Color Cycle) */
        .color-cycle-flash {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            opacity: 0;
            animation: colorFlash 1s forwards;
            pointer-events: none;
            z-index: 190;
        }
        @keyframes colorFlash {
            0% { opacity: 0; background-color: transparent; }
            10% { opacity: 0.8; background-color: red; }
            30% { opacity: 0.8; background-color: blue; }
            50% { opacity: 0.8; background-color: green; }
            70% { opacity: 0.8; background-color: yellow; }
            90% { opacity: 0.8; background-color: magenta; }
            100% { opacity: 0; background-color: transparent; }
        }

        /* Nouveau: Floating Emojis */
        .floating-emoji {
            position: absolute;
            font-size: 2.5em;
            opacity: 0;
            animation: floatUp 2s forwards;
            pointer-events: none;
            z-index: 105;
        }
        @keyframes floatUp {
            0% { opacity: 0; transform: translateY(0) scale(0.8); }
            20% { opacity: 1; transform: translateY(-30px) scale(1.1); }
            80% { opacity: 1; transform: translateY(-100px) scale(1); }
            100% { opacity: 0; transform: translateY(-150px) scale(0.7); }
        }

        /* Nouveau: Radial Pulse */
        .radial-pulse {
            position: absolute;
            border-radius: 50%;
            background-color: transparent;
            border: 10px solid currentColor;
            opacity: 0;
            animation: pulseExpand 1.2s forwards;
            pointer-events: none;
            z-index: 140;
            box-shadow: 0 0 20px currentColor;
        }
        @keyframes pulseExpand {
            0% { transform: scale(0); opacity: 1; border-width: 10px; }
            100% { transform: scale(3); opacity: 0; border-width: 0px; }
        }

        /* Nouveau: Falling Objects */
        .falling-object {
            position: absolute;
            opacity: 0;
            animation: fallDown 2s forwards;
            pointer-events: none;
            z-index: 45;
        }
        @keyframes fallDown {
            0% { opacity: 0; transform: translateY(-50px) rotate(0deg); }
            10% { opacity: 1; }
            100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
        }

        /* Nouveau: Inverted Colors */
        .invert-colors {
            filter: invert(100%) hue-rotate(180deg);
        }

        /* NOUVEAUX ÉVÉNEMENTS CSS */

        /* Scanline Overlay */
        .scanline-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: repeating-linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.1),
                rgba(0, 0, 0, 0.1) 2px,
                transparent 2px,
                transparent 4px
            );
            opacity: 0;
            animation: scanlineFade 0.8s forwards;
            pointer-events: none;
            z-index: 170;
        }
        @keyframes scanlineFade {
            0% { opacity: 0; }
            50% { opacity: 0.3; }
            100% { opacity: 0; }
        }

        /* Random Text Burst */
        .text-burst-item {
            position: absolute;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5em;
            color: white;
            opacity: 0;
            animation: textBurst 1s forwards;
            pointer-events: none;
            z-index: 60;
            text-shadow: 0 0 8px currentColor;
        }
        @keyframes textBurst {
            0% { opacity: 0; transform: scale(0.5) translateY(0); }
            20% { opacity: 1; transform: scale(1.1) translateY(-20px); }
            80% { opacity: 1; transform: scale(1) translateY(-40px); }
            100% { opacity: 0; transform: scale(0.8) translateY(-60px); }
        }

        /* Button Scale Pulse */
        .button-scale-pulse {
            animation: buttonScalePulse 0.3s ease-out;
        }
        @keyframes buttonScalePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Hue Rotate Flash */
        .hue-rotate-flash {
            animation: hueRotateFlash 0.5s forwards;
        }
        @keyframes hueRotateFlash {
            0% { filter: hue-rotate(0deg); opacity: 0; }
            50% { filter: hue-rotate(360deg); opacity: 1; }
            100% { filter: hue-rotate(0deg); opacity: 0; }
        }

        /* Mouse Trail */
        .mouse-trail-particle {
            position: absolute;
            border-radius: 50%;
            background-color: currentColor;
            opacity: 0;
            animation: fadeOutTrail 0.8s forwards;
            pointer-events: none;
            z-index: 20;
        }
        @keyframes fadeOutTrail {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }

        /* Ripple Effect */
        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            background-color: transparent;
            border: 5px solid currentColor;
            opacity: 0;
            animation: ripple 0.7s forwards;
            pointer-events: none;
            z-index: 101; /* Z-index ajusté pour être au-dessus du bouton de stimulation */
        }
        @keyframes ripple {
            0% { transform: scale(0); opacity: 1; border-width: 5px; }
            100% { transform: scale(1.5); opacity: 0; border-width: 0px; }
        }

        /* Random Icon Pop */
        .icon-pop {
            position: absolute;
            font-size: 3em;
            opacity: 0;
            animation: iconPop 1.2s forwards;
            pointer-events: none;
            z-index: 90;
            text-shadow: 0 0 10px currentColor;
        }
        @keyframes iconPop {
            0% { opacity: 0; transform: scale(0.5) rotate(0deg); }
            20% { opacity: 1; transform: scale(1.2) rotate(15deg); }
            80% { opacity: 1; transform: scale(1) rotate(-15deg); }
            100% { opacity: 0; transform: scale(0.7) rotate(0deg); }
        }

        /* Screen Zoom Burst */
        .screen-zoom-active {
            animation: screenZoom 0.4s forwards;
        }
        @keyframes screenZoom {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Falling Abstract Particles */
        .abstract-particle {
            position: absolute;
            border-radius: 50%; /* Default to circle */
            background-color: currentColor;
            opacity: 0;
            animation: abstractFall 2.5s forwards;
            pointer-events: none;
            z-index: 30;
        }
        @keyframes abstractFall {
            0% { opacity: 0.8; transform: translateY(-50px) rotate(0deg) scale(0.5); }
            100% { opacity: 0; transform: translateY(100vh) rotate(720deg) scale(1.5); }
        }

        /* Random Background Pattern Overlay */
        .pattern-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            opacity: 0;
            animation: patternFade 1.5s forwards;
            pointer-events: none;
            z-index: 165;
        }
        @keyframes patternFade {
            0% { opacity: 0; }
            50% { opacity: 0.1; }
            100% { opacity: 0; }
        }

        /* Level Up Message */
        .level-up-message {
            position: fixed;
            top: 50px; /* Positionné en haut */
            left: 50%;
            transform: translateX(-50%); /* Centrage horizontal */
            font-family: 'Press Start 2P', cursive;
            font-size: 4em;
            color: #FFD700; /* Or */
            text-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700, 0 0 40px #FFD700;
            opacity: 0;
            animation: levelUpFade 2s forwards;
            z-index: 250;
            pointer-events: none;
        }
        @keyframes levelUpFade {
            0% { opacity: 0; transform: translateX(-50%) scale(0.8); }
            20% { opacity: 1; transform: translateX(-50%) scale(1.1); }
            80% { opacity: 1; transform: translateX(-50%) scale(1); }
            100% { opacity: 0; transform: translateX(-50%) scale(0.9); }
        }

        /* Event Unlocked Notification */
        .event-unlocked-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 255, 0, 0.8);
            color: white;
            font-family: 'Press Start 2P', cursive;
            padding: 15px 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
            opacity: 0;
            animation: slideInFadeOut 3s forwards;
            z-index: 260;
            pointer-events: none;
            text-align: center;
        }
        @keyframes slideInFadeOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(50px); }
            10% { opacity: 1; transform: translateX(-50%) translateY(0); }
            90% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-50px); }
        }

    </style>
</head>
<body>
    <div id="clickCounter">Clics: 0</div>
    <div id="levelCounter">Niveau: 1</div> <!-- Nouveau compteur de niveau -->
    <button id="autoStimulationButton" disabled>🔒 débloquez au niveau 32</button>
    <button id="stimulationButton">STIMULATION !</button>

    <audio id="clickSound" src="https://www.soundjay.com/buttons/beep-07.mp3" preload="auto"></audio>
    <audio id="laserSound" src="https://www.soundjay.com/misc/sounds/laser-01.mp3" preload="auto"></audio>
    <audio id="pokemonSound" src="https://www.soundjay.com/communication/sounds/bell-ring-01.mp3" preload="auto"></audio>
    <audio id="glitchSound" src="https://www.soundjay.com/misc/sounds/glitch-01.mp3" preload="auto"></audio>
    <audio id="fireworkSound" src="https://www.soundjay.com/buttons/beep-05.mp3" preload="auto"></audio>
    <audio id="pokeballSound" src="https://www.soundjay.com/communication/sounds/ding-01.mp3" preload="auto"></audio>
    <audio id="thumpSound" src="https://www.soundjay.com/buttons/button-10.mp3" preload="auto"></audio>
    <audio id="whooshSound" src="https://www.soundjay.com/misc/sounds/whoosh-1.mp3" preload="auto"></audio>
    <audio id="staticSound" src="https://www.soundjay.com/misc/sounds/static-1.mp3" preload="auto"></audio>
    <audio id="zapSound" src="https://www.soundjay.com/misc/sounds/zap-1.mp3" preload="auto"></audio>
    <audio id="chimeSound" src="https://www.soundjay.com/communication/sounds/chime-1.mp3" preload="auto"></audio>
    <audio id="sweepSound" src="https://www.soundjay.com/misc/sounds/whoosh-2.mp3" preload="auto"></audio>
    <audio id="popSound" src="https://www.soundjay.com/buttons/button-1.mp3" preload="auto"></audio>
    <audio id="chime2Sound" src="https://www.soundjay.com/communication/sounds/chime-2.mp3" preload="auto"></audio>
    <audio id="boingSound" src="https://www.soundjay.com/mechanical/sounds/boing-1.mp3" preload="auto"></audio>
    <audio id="blipSound" src="https://www.soundjay.com/buttons/button-3.mp3" preload="auto"></audio>
    <audio id="levelUpSound" src="https://www.soundjay.com/misc/sounds/success-sound-2.mp3" preload="auto"></audio> <!-- Nouveau son pour le passage de niveau -->


    <script>
        const button = document.getElementById('stimulationButton');
        const clickCounterElement = document.getElementById('clickCounter');
        const levelCounterElement = document.getElementById('levelCounter'); // Nouveau
        const autoStimulationButton = document.getElementById('autoStimulationButton');

        const clickSound = document.getElementById('clickSound');
        const laserSound = document.getElementById('laserSound');
        const pokemonSound = document.getElementById('pokemonSound');
        const glitchSound = document.getElementById('glitchSound');
        const fireworkSound = document.getElementById('fireworkSound');
        const pokeballSound = document.getElementById('pokeballSound');
        const thumpSound = document.getElementById('thumpSound');
        const whooshSound = document.getElementById('whooshSound');
        const staticSound = document.getElementById('staticSound');
        const zapSound = document.getElementById('zapSound');
        const chimeSound = document.getElementById('chimeSound');
        const sweepSound = document.getElementById('sweepSound');
        const popSound = document.getElementById('popSound');
        const chime2Sound = document.getElementById('chime2Sound');
        const boingSound = document.getElementById('boingSound');
        const blipSound = document.getElementById('blipSound');
        const levelUpSound = document.getElementById('levelUpSound'); // Nouveau

        let clickCount = 0;
        let currentLevel = 1; // Nouveau
        const CLICKS_PER_LEVEL = 10; // Clics nécessaires pour chaque niveau
        const MAX_LEVEL = 40; // Niveau maximum
        const AUTOSTIM_UNLOCK_LEVEL = 32; // Niveau pour débloquer l'autostimulation
        let autoStimulationInterval = null;

        const GIPHY_API_KEY = '2VM6PXF9Fj9QnHprvewgFGkGwGGy3lBR'; // Clé API Giphy

        const eventMessages = [
            "Énergie !", "Boom !", "Flash !", "Pouah !", "Magnifique !",
            "Wow !", "Incroyable !", "Vitesse !", "Impact !", "Explosion !",
            "Pokémon Go !", "Attaque Éclair !", "Super Potion !", "Rebond !",
            "LASER !", "Impulsion !", "Décharge !", "Éclat !", "GLITCH !", "Secousse !",
            "Feux d'artifice !", "Néon !", "GIF !", "Poké Ball !",
            "OVERLOAD !", "SYNERGY !", "MAXIMUM !", "VIBRATIONS !",
            "DISTORSION !", "PULSATION !", "ZAP !", "CHIME !",
            "GRILLE !", "CONFETTI !", "COULEUR !", "EMOJI !", "FOND !", "SCRAMBLE !", "PULSE RADIAL !", "INVERSE !", "BURST SONORE !", "CHUTE !",
            "SCAN !", "TEXTE !", "SCALE !", "HUE !", "TRAIL !", "RIPPLE !", "ICÔNE !", "ZOOM !", "PITCH !", "PATTERN !"
        ];

        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#00ffff', '#ff00ff', '#FFA500', '#800080', '#00BFFF', '#FFD700', '#FF1493', '#ADFF2F'];

        const genericImages = [
            'https://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_icon.png',
            'https://cdn-icons-png.flaticon.com/512/36/36601.png',
            'https://www.freeiconspng.com/uploads/lightning-bolt-icon-25.png',
            'https://www.pngall.com/wp-content/uploads/1/Star-PNG-Picture.png',
            'https://www.freeiconspng.com/uploads/confetti-png-21.png'
        ];

        const reactionIcons = [
            '✨', '❤️', '🔥', '🎉', '⚡', '🚀', '🤩', '💯', '🌈', '🎶'
        ];

        const asciiChars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?`~".split('');

        const maxPokemonId = 1025;

        const pokeballImages = [
            "https://archives.bulbagarden.net/media/upload/thumb/2/23/Pok%C3%A9_Ball_Dream_RGB.png/32px-Pok%C3%A9_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/b/b3/Great_Ball_Dream_RGB.png/32px-Great_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/0/01/Ultra_Ball_Dream_RGB.png/32px-Ultra_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/9/91/Master_Ball_Dream_RGB.png/32px-Master_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/b/b1/Premier_Ball_Dream_RGB.png/32px-Premier_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/4/43/Dive_Ball_Dream_RGB.png/32px-Dive_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/e/ef/Luxury_Ball_Dream_RGB.png/32px-Luxury_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/2/2e/Fast_Ball_Dream_RGB.png/32px-Fast_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/1/1d/Love_Ball_Dream_RGB.png/32px-Love_Ball_Dream_RGB.png",
            "https://archives.bulbagarden.net/media/upload/thumb/d/d4/Dream_Ball_Dream_RGB.png/32px-Dream_Ball_Dream_RGB.png"
        ];

        const cssFilters = [
            'filter-sepia',
            'filter-contrast',
            'filter-saturate'
        ];

        const cursorImages = [
            'url("data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="lime">✨</text></svg>") 16 16, auto',
            'url("data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="yellow">⚡</text></svg>") 16 16, auto',
            'url("data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="red">❤️</text></svg>") 16 16, auto'
        ];

        // Liste complète des définitions d'événements avec leur niveau de déblocage
        const eventDefinitions = [
            { type: 'text', weight: 1, unlockLevel: 1, name: 'Message Textuel' },
            { type: 'circle', weight: 1, unlockLevel: 1, name: 'Cercle Lumineux' },
            { type: 'genericImage', weight: 0.5, unlockLevel: 2, name: 'Image Générique' },
            { type: 'pokemon', weight: 3, unlockLevel: 3, name: 'Pokémon' },
            { type: 'bouncingShape', weight: 1.5, unlockLevel: 4, name: 'Forme Rebondissante' },
            { type: 'laser', weight: 0.8, unlockLevel: 5, name: 'Faisceau Laser' },
            { type: 'fireworks', weight: 1.5, unlockLevel: 6, name: 'Feux d\'Artifice' },
            { type: 'neonShape', weight: 1.2, unlockLevel: 7, name: 'Forme Néon' },
            { type: 'randomGif', weight: 4, unlockLevel: 8, name: 'GIF Aléatoire' },
            { type: 'pokeball', weight: 3, unlockLevel: 9, name: 'Poké Ball' },
            { type: 'geometricParticles', weight: 2, unlockLevel: 10, name: 'Particules Géométriques' },
            { type: 'text3D', weight: 2, unlockLevel: 11, name: 'Texte 3D' },
            { type: 'tracingLine', weight: 1.5, unlockLevel: 12, name: 'Ligne Traçante' },
            { type: 'soundWave', weight: 1.5, unlockLevel: 13, name: 'Onde Sonore Visuelle' },
            { type: 'changeCursor', weight: 1, unlockLevel: 14, name: 'Changement de Curseur' },
            { type: 'asciiRain', weight: 1, unlockLevel: 15, name: 'Pluie ASCII' },
            { type: 'tunnelEffect', weight: 0.7, unlockLevel: 16, name: 'Effet Tunnel' },
            { type: 'reactionIcons', weight: 2, unlockLevel: 17, name: 'Icônes Réaction' },
            { type: 'monochromaticFlash', weight: 1, unlockLevel: 18, name: 'Flash Monochrome' },
            { type: 'noiseOverlay', weight: 0.5, unlockLevel: 19, name: 'Bruit Visuel' },
            { type: 'expandingGrid', weight: 1.0, unlockLevel: 20, name: 'Grille en Expansion' },
            { type: 'confettiBurst', weight: 1.0, unlockLevel: 21, name: 'Explosion de Confettis' },
            { type: 'colorCycleFlash', weight: 0.8, unlockLevel: 22, name: 'Flash Cycle Couleur' },
            { type: 'floatingEmojis', weight: 1.0, unlockLevel: 23, name: 'Emojis Flottants' },
            { type: 'randomBackgroundChange', weight: 0.5, unlockLevel: 24, name: 'Changement de Fond' },
            { type: 'textScramble', weight: 0.7, unlockLevel: 25, name: 'Brouillage Texte' },
            { type: 'radialPulse', weight: 1.0, unlockLevel: 26, name: 'Pulsation Radiale' },
            { type: 'invertedColors', weight: 0.6, unlockLevel: 27, name: 'Couleurs Inversées' },
            { type: 'soundBurst', weight: 0.9, unlockLevel: 28, name: 'Burst Sonore' },
            { type: 'fallingObjects', weight: 0.8, unlockLevel: 29, name: 'Objets Tombants' },
            { type: 'scanlineOverlay', weight: 0.7, unlockLevel: 30, name: 'Overlay Scanline' },
            { type: 'randomTextBurst', weight: 1.2, unlockLevel: 31, name: 'Burst Texte Aléatoire' },
            { type: 'buttonScalePulse', weight: 1.0, unlockLevel: 32, name: 'Pulsation Bouton' },
            { type: 'hueRotateFlash', weight: 0.9, unlockLevel: 33, name: 'Flash Rotation Teinte' },
            { type: 'mouseTrail', weight: 0.6, unlockLevel: 34, name: 'Traînée de Souris' },
            { type: 'rippleEffect', weight: 1.1, unlockLevel: 35, name: 'Effet d\'Onde' },
            { type: 'randomIconPop', weight: 1.3, unlockLevel: 36, name: 'Pop Icône Aléatoire' },
            { type: 'screenZoomBurst', weight: 0.8, unlockLevel: 37, name: 'Zoom Écran' },
            { type: 'audioPitchShift', weight: 0.5, unlockLevel: 38, name: 'Changement Pitch Audio' },
            { type: 'fallingAbstractParticles', weight: 0.9, unlockLevel: 39, name: 'Particules Abstraites' },
            { type: 'randomBackgroundPattern', weight: 0.4, unlockLevel: 40, name: 'Motif de Fond Aléatoire' }
        ];

        let availableEvents = []; // Liste des événements disponibles pour le niveau actuel

        // Fonction pour mettre à jour la liste des événements disponibles
        function updateAvailableEvents() {
            const previouslyAvailableCount = availableEvents.length;
            availableEvents = eventDefinitions.filter(event => event.unlockLevel <= currentLevel);
            
            // Si de nouveaux événements ont été débloqués
            if (availableEvents.length > previouslyAvailableCount) {
                const newlyUnlockedEvents = availableEvents.slice(previouslyAvailableCount);
                newlyUnlockedEvents.forEach(event => {
                    showEventUnlockedNotification(event.name);
                });
            }
            console.log(`Niveau ${currentLevel}: ${availableEvents.length} événements débloqués.`);
        }

        // Appel initial pour définir les événements du niveau 1
        updateAvailableEvents();
        levelCounterElement.textContent = `Niveau: ${currentLevel}`;

        // Initialisation du bouton d'autostimulation au chargement
        if (currentLevel < AUTOSTIM_UNLOCK_LEVEL) {
            autoStimulationButton.disabled = true;
            autoStimulationButton.innerHTML = '🔒 débloquez au niveau ' + AUTOSTIM_UNLOCK_LEVEL;
        } else {
            autoStimulationButton.disabled = false;
            autoStimulationButton.textContent = 'AUTOSTIMULATION';
        }


        button.addEventListener('click', () => { // Removed event parameter from here
            clickCount++;
            clickCounterElement.textContent = `Clics: ${clickCount}`;
            playSound(clickSound);
            createParticles(button);
            createCustomParticles();

            button.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
            button.style.boxShadow = `0 0 ${20 + clickCount}px ${button.style.backgroundColor}`;
            
            // Déclenche 4 à 8 événements aléatoires par clic (augmenté)
            const numEventsToTrigger = Math.floor(Math.random() * 5) + 4; // 4, 5, 6, 7 ou 8 événements
            for (let i = 0; i < numEventsToTrigger; i++) {
                createRandomEvent(); // Call without event parameter
            }

            // Logique de passage de niveau
            if (currentLevel < MAX_LEVEL) { // Seulement si on n'a pas atteint le niveau max
                if (clickCount >= CLICKS_PER_LEVEL) {
                    levelUp();
                }
            } else {
                // Au niveau max, les clics s'accumulent sans réinitialisation
                levelCounterElement.textContent = `Niveau: MAX !`;
            }


            // Effets aléatoires indépendants du niveau
            if (Math.random() < 0.05) { // 5% de chance de filtre aléatoire
                applyRandomFilter();
            }

            if (Math.random() < 0.03) { // 3% de chance de glitch
                triggerGlitch();
            }

            if (Math.random() < 0.02) { // 2% de chance de distorsion de l'écran
                triggerScreenDistortion();
            }
            if (Math.random() < 0.05) { // 5% de chance de vibration du bouton
                triggerButtonVibration();
            }
            if (Math.random() < 0.07) { // 7% de chance de pulsation lumineuse du compteur
                triggerCounterPulse();
            }
        });

        autoStimulationButton.addEventListener('click', () => {
            if (autoStimulationInterval) {
                clearInterval(autoStimulationInterval);
                autoStimulationInterval = null;
                autoStimulationButton.textContent = "AUTOSTIMULATION";
                autoStimulationButton.classList.remove('active');
            } else {
                autoStimulationButton.textContent = "STOP AUTOSTIMULATION";
                autoStimulationButton.classList.add('active');
                autoStimulationInterval = setInterval(() => {
                    // Simulate a click at a random position for autostimulation
                    const simulatedEvent = new MouseEvent('click', {
                        clientX: Math.random() * window.innerWidth,
                        clientY: Math.random() * window.innerHeight,
                        bubbles: true,
                        cancelable: true,
                        view: window
                    });
                    button.dispatchEvent(simulatedEvent);
                }, 250);
            }
        });

        // Fonction pour passer au niveau supérieur
        function levelUp() {
            currentLevel++;
            if (currentLevel <= MAX_LEVEL) { // Réinitialise les clics seulement si on n'est pas au niveau max
                clickCount = 0; 
            }
            
            if (currentLevel === MAX_LEVEL) {
                levelCounterElement.textContent = `Niveau: MAX !`;
            } else {
                levelCounterElement.textContent = `Niveau: ${currentLevel}`;
            }
            
            playSound(levelUpSound); // Joue un son de passage de niveau

            // Affiche un message "Niveau Suivant!"
            const levelUpMessage = document.createElement('div');
            levelUpMessage.classList.add('level-up-message');
            levelUpMessage.textContent = `NIVEAU ${currentLevel} !`;
            document.body.appendChild(levelUpMessage);
            levelUpMessage.addEventListener('animationend', () => levelUpMessage.remove());

            updateAvailableEvents(); // Met à jour la liste des événements disponibles

            // Débloque l'autostimulation au niveau spécifié
            if (currentLevel === AUTOSTIM_UNLOCK_LEVEL) {
                autoStimulationButton.disabled = false;
                autoStimulationButton.textContent = 'AUTOSTIMULATION';
                showEventUnlockedNotification("AUTOSTIMULATION"); // Notification pour l'autostimulation
            }
        }

        // Fonction pour afficher une notification d'événement débloqué
        function showEventUnlockedNotification(eventName) {
            const notification = document.createElement('div');
            notification.classList.add('event-unlocked-notification');
            notification.textContent = `"${eventName}" débloqué !`;
            document.body.appendChild(notification);
            notification.addEventListener('animationend', () => notification.remove());
        }

        function playSound(audioElement, pitch = 1) {
            audioElement.currentTime = 0;
            audioElement.playbackRate = pitch;
            audioElement.play().catch(e => console.log("Erreur de lecture audio :", e));
        }

        async function createRandomEvent() { // No clickEvent parameter
            if (availableEvents.length === 0) {
                console.warn("Aucun événement disponible au niveau actuel.");
                return;
            }

            let totalWeight = 0;
            availableEvents.forEach(event => { totalWeight += event.weight; });

            let randomNum = Math.random() * totalWeight;
            let currentWeight = 0;
            let selectedEventType;

            for (let i = 0; i < availableEvents.length; i++) {
                currentWeight += availableEvents[i].weight;
                if (randomNum < currentWeight) {
                    selectedEventType = availableEvents[i].type;
                    break;
                }
            }

            // Always generate random coordinates for events that appear "anywhere"
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;

            switch (selectedEventType) {
                case 'text':
                    const textElement = document.createElement('div');
                    textElement.classList.add('event-text');
                    textElement.textContent = eventMessages[Math.floor(Math.random() * eventMessages.length)];
                    textElement.style.left = `${x}px`;
                    textElement.style.top = `${y}px`;
                    document.body.appendChild(textElement);
                    textElement.addEventListener('animationend', () => textElement.remove());
                    break;

                case 'text3D':
                    const text3DElement = document.createElement('div');
                    text3DElement.classList.add('text-3d-popup');
                    text3DElement.textContent = eventMessages[Math.floor(Math.random() * eventMessages.length)];
                    text3DElement.style.left = `${x}px`;
                    text3DElement.style.top = `${y}px`;
                    document.body.appendChild(text3DElement);
                    text3DElement.addEventListener('animationend', () => text3DElement.remove());
                    playSound(whooshSound);
                    break;

                case 'circle':
                    const circleElement = document.createElement('div');
                    circleElement.classList.add('event-circle');
                    const size = Math.random() * 100 + 50;
                    circleElement.style.width = `${size}px`;
                    circleElement.style.height = `${size}px`;
                    circleElement.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    circleElement.style.left = `${x - size / 2}px`;
                    circleElement.style.top = `${y - size / 2}px`;
                    document.body.appendChild(circleElement);
                    circleElement.addEventListener('animationend', () => circleElement.remove());
                    break;

                case 'genericImage':
                    const genericImageElement = document.createElement('img');
                    genericImageElement.classList.add('event-image');
                    genericImageElement.src = genericImages[Math.floor(Math.random() * genericImages.length)];
                    // Assuming generic images are 100x100 for centering
                    genericImageElement.style.left = `${x - 50}px`;
                    genericImageElement.style.top = `${y - 50}px`;
                    document.body.appendChild(genericImageElement);
                    genericImageElement.addEventListener('animationend', () => genericImageElement.remove());
                    break;

                case 'pokemon':
                    const pokemonId = Math.floor(Math.random() * maxPokemonId) + 1;
                    const paddedId = String(pokemonId).padStart(3, '0');

                    const pokemonImageElement = document.createElement('img');
                    pokemonImageElement.classList.add('pokemon-image');
                    pokemonImageElement.src = `https://www.pokepedia.fr/images/thumb/${String.fromCharCode(97 + Math.floor(Math.random() * 2))}/${String.fromCharCode(97 + Math.floor(Math.random() * 2))}/Miniat_${paddedId}.png/100px-Miniat_${paddedId}.png`;
                    pokemonImageElement.onerror = () => {
                        console.warn(`Impossible de charger l'image Pokémon pour l'ID ${pokemonId} depuis Poképédia. Tentative avec PokeAPI.`);
                        pokemonImageElement.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemonId}.png`;
                        pokemonImageElement.onerror = () => {
                            console.error("Impossible de charger une image Pokémon, même avec PokeAPI. Utilisation d'une image générique.");
                            pokemonImageElement.src = genericImages[Math.floor(Math.random() * genericImages.length)];
                        };
                    };
                    // Assuming pokemon images are 150x150 for centering
                    pokemonImageElement.style.left = `${x - 75}px`;
                    pokemonImageElement.style.top = `${y - 75}px`;
                    document.body.appendChild(pokemonImageElement);
                    pokemonImageElement.addEventListener('animationend', () => pokemonImageElement.remove());
                    playSound(pokemonSound);
                    break;

                case 'bouncingShape':
                    createBouncingShape();
                    shakeScreen();
                    break;

                case 'laser':
                    createLaserBeam();
                    playSound(laserSound);
                    shakeScreen();
                    break;

                case 'fireworks':
                    createFireworks();
                    playSound(fireworkSound);
                    break;

                case 'neonShape':
                    createNeonShape();
                    break;

                case 'randomGif':
                    createRandomGif(x, y); // Pass x, y
                    break;
                
                case 'pokeball':
                    createPokeball(x, y); // Pass x, y
                    playSound(pokeballSound);
                    break;

                case 'geometricParticles':
                    createGeometricParticles();
                    break;

                case 'tracingLine':
                    createTracingLine();
                    break;

                case 'soundWave':
                    createSoundWave(x, y); // Pass x, y
                    playSound(thumpSound);
                    break;
                
                case 'changeCursor':
                    changeCursorTemporarily();
                    break;

                case 'asciiRain':
                    createAsciiRain();
                    break;

                case 'tunnelEffect':
                    createTunnelEffect();
                    break;

                case 'reactionIcons':
                    createReactionIcon();
                    break;

                case 'monochromaticFlash':
                    createMonochromaticFlash();
                    break;

                case 'noiseOverlay':
                    createNoiseOverlay();
                    playSound(staticSound);
                    break;
                
                case 'expandingGrid':
                    createExpandingGrid();
                    playSound(popSound);
                    break;
                case 'confettiBurst':
                    createConfettiBurst();
                    playSound(chime2Sound);
                    break;
                case 'colorCycleFlash':
                    createColorCycleFlash();
                    playSound(sweepSound);
                    break;
                case 'floatingEmojis':
                    createFloatingEmojis();
                    playSound(chime2Sound);
                    break;
                case 'randomBackgroundChange':
                    changeRandomBackground();
                    playSound(thumpSound);
                    break;
                case 'textScramble':
                    scrambleClickCounter();
                    playSound(glitchSound);
                    break;
                case 'radialPulse':
                    createRadialPulse(x, y); // Pass x, y
                    playSound(thumpSound);
                    break;
                case 'invertedColors':
                    toggleInvertColors();
                    playSound(zapSound);
                    break;
                case 'soundBurst':
                    playMultiToneBurst();
                    break;
                case 'fallingObjects':
                    createFallingObjects();
                    playSound(clickSound);
                    break;
                
                case 'scanlineOverlay':
                    createScanlineOverlay();
                    playSound(staticSound);
                    break;
                case 'randomTextBurst':
                    createRandomTextBurst(x, y); // Pass x, y
                    playSound(blipSound);
                    break;
                case 'buttonScalePulse':
                    triggerButtonScalePulse();
                    playSound(boingSound);
                    break;
                case 'hueRotateFlash':
                    triggerHueRotateFlash();
                    playSound(sweepSound);
                    break;
                case 'mouseTrail':
                    activateMouseTrail();
                    break;
                case 'rippleEffect':
                    createRippleEffect(x, y); // Pass x, y
                    playSound(chimeSound);
                    break;
                case 'randomIconPop':
                    createRandomIconPop(x, y); // Pass x, y
                    playSound(popSound);
                    break;
                case 'screenZoomBurst':
                    triggerScreenZoomBurst();
                    playSound(whooshSound);
                    break;
                case 'audioPitchShift':
                    triggerAudioPitchShift();
                    break;
                case 'fallingAbstractParticles':
                    createFallingAbstractParticles();
                    playSound(blipSound);
                    break;
                case 'randomBackgroundPattern':
                    createRandomBackgroundPattern();
                    playSound(staticSound);
                    break;
            }
        }

        function createBouncingShape() {
            const shape = document.createElement('div');
            shape.classList.add('bouncing-shape');
            document.body.appendChild(shape);

            let shapeType = Math.floor(Math.random() * 3);
            let sizeX, sizeY;

            switch (shapeType) {
                case 0:
                    shape.classList.add('bouncing-ball');
                    sizeX = sizeY = 80;
                    break;
                case 1:
                    shape.classList.add('bouncing-square');
                    sizeX = sizeY = 80;
                    break;
                case 2:
                    shape.classList.add('bouncing-oval');
                    sizeX = 100;
                    sizeY = 60;
                    break;
            }
            shape.style.width = `${sizeX}px`;
            shape.style.height = `${sizeY}px`;

            let posX = Math.random() * (window.innerWidth - sizeX);
            let posY = Math.random() * (window.innerHeight - sizeY);
            let speedX = (Math.random() > 0.5 ? 1 : -1) * (5 + Math.random() * 5);
            let speedY = (Math.random() > 0.5 ? 1 : -1) * (5 + Math.random() * 5);

            shape.style.left = `${posX}px`;
            shape.style.top = `${posY}px`;

            const duration = 5000;
            const startTime = Date.now();

            function animateShape() {
                if (Date.now() - startTime > duration) {
                    shape.remove();
                    return;
                }

                posX += speedX;
                posY += speedY;

                if (posX + sizeX > window.innerWidth || posX < 0) {
                    speedX *= -1;
                    posX = Math.max(0, Math.min(window.innerWidth - sizeX, posX));
                    shape.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                }
                if (posY + sizeY > window.innerHeight || posY < 0) {
                    speedY *= -1;
                    posY = Math.max(0, Math.min(window.innerHeight - sizeY, posY));
                    shape.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                }

                shape.style.left = `${posX}px`;
                shape.style.top = `${posY}px`;

                requestAnimationFrame(animateShape);
            }

            animateShape();
        }

        function createLaserBeam() {
            const laser = document.createElement('div');
            const isVertical = Math.random() > 0.5;
            laser.classList.add('laser-beam');
            if (isVertical) {
                laser.classList.add('vertical');
            }

            if (isVertical) {
                laser.style.left = `${Math.random() * window.innerWidth}px`;
                laser.style.top = `0`;
                laser.style.animation = 'sweepLaserVertical 2s forwards';
            } else {
                laser.style.top = `${Math.random() * window.innerHeight}px`;
                laser.style.left = `0`;
                laser.style.animation = 'sweepLaser 2s forwards';
            }

            document.body.appendChild(laser);
            laser.addEventListener('animationend', () => laser.remove());
        }

        function createParticles(sourceElement) {
            const rect = sourceElement.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const numParticles = 10 + Math.floor(Math.random() * 10);

            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const size = Math.random() * 10 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;

                particle.style.setProperty('--rand-x', `${(Math.random() - 0.5) * 400}px`);
                particle.style.setProperty('--rand-y', `${(Math.random() - 0.5) * 400}px`);

                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        function createCustomParticles() {
            const numParticles = 30 + Math.floor(Math.random() * 50);
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('custom-particle');

                const size = Math.random() * 15 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                particle.style.left = `${Math.random() * window.innerWidth}px`;
                particle.style.top = `${Math.random() * window.innerHeight}px`;

                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        function createGeometricParticles() {
            const numParticles = 15 + Math.floor(Math.random() * 15);
            const centerX = Math.random() * window.innerWidth;
            const centerY = Math.random() * window.innerHeight;

            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('geometric-particle');

                const size = Math.random() * 20 + 10;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                particle.style.color = colors[Math.floor(Math.random() * colors.length)];

                const shapeType = Math.floor(Math.random() * 3);
                if (shapeType === 0) particle.classList.add('square');
                else if (shapeType === 1) particle.classList.add('triangle');
                else particle.classList.add('diamond');

                particle.style.setProperty('--rand-x', `${(Math.random() - 0.5) * 500}px`);
                particle.style.setProperty('--rand-y', `${(Math.random() - 0.5) * 500}px`);
                particle.style.setProperty('--initial-rot', `${Math.random() * 360}deg`);
                particle.style.setProperty('--final-rot', `${Math.random() * 1080 + 720}deg`);

                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        function createTracingLine() {
            const line = document.createElement('div');
            line.classList.add('tracing-line');
            line.style.color = colors[Math.floor(Math.random() * colors.length)];

            const direction = Math.floor(Math.random() * 4);

            if (direction === 0) {
                line.style.top = `${Math.random() * window.innerHeight}px`;
                line.style.left = `0`;
            } else if (direction === 1) {
                line.classList.add('vertical');
                line.style.left = `${Math.random() * window.innerWidth}px`;
                line.style.top = `0`;
            } else if (direction === 2) {
                line.classList.add('diagonal-tlbr');
                line.style.left = `${Math.random() * window.innerWidth * 0.7}px`;
                line.style.top = `${Math.random() * window.innerHeight * 0.7}px`;
                line.style.transform = `scale(0) rotate(45deg)`;
                line.style.animation = `traceLineDiagonalTLBR 2s forwards`;
                const styleSheet = document.styleSheets[0];
                const keyframesName = `traceLineDiagonalTLBR`;
                const rule = `@keyframes ${keyframesName} {
                    0% { transform: scale(0) rotate(45deg); opacity: 0; }
                    10% { transform: scale(1) rotate(45deg); opacity: 1; }
                    90% { opacity: 1; }
                    100% { transform: scale(3) rotate(45deg) translateX(100vw) translateY(100vh); opacity: 0; }
                }`;
                // Check if rule already exists to prevent duplicates
                if (![...styleSheet.cssRules].some(r => r.name === keyframesName)) {
                    styleSheet.insertRule(rule, styleSheet.cssRules.length);
                }

            } else {
                line.classList.add('diagonal-trbl');
                line.style.left = `${Math.random() * window.innerWidth * 0.7 + window.innerWidth * 0.3}px`;
                line.style.top = `${Math.random() * window.innerHeight * 0.7}px`;
                line.style.transform = `scale(0) rotate(-45deg)`;
                line.style.animation = `traceLineDiagonalTRBL 2s forwards`;
                const styleSheet = document.styleSheets[0];
                const keyframesName = `traceLineDiagonalTRBL`;
                const rule = `@keyframes ${keyframesName} {
                    0% { transform: scale(0) rotate(-45deg); opacity: 0; }
                    10% { transform: scale(1) rotate(-45deg); opacity: 1; }
                    90% { opacity: 1; }
                    100% { transform: scale(3) rotate(-45deg) translateX(-100vw) translateY(100vh); opacity: 0; }
                }`;
                if (![...styleSheet.cssRules].some(r => r.name === keyframesName)) {
                    styleSheet.insertRule(rule, styleSheet.cssRules.length);
                }
            }

            document.body.appendChild(line);
            line.addEventListener('animationend', () => line.remove());
        }

        function createSoundWave(x, y) { // Updated parameter
            const wave = document.createElement('div');
            wave.classList.add('sound-wave');
            wave.style.left = `${x}px`;
            wave.style.top = `${y}px`;
            wave.style.color = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(wave);
            wave.addEventListener('animationend', () => wave.remove());
        }

        function applyRandomFilter() {
            cssFilters.forEach(filterClass => document.body.classList.remove(filterClass));
            const randomFilter = cssFilters[Math.floor(Math.random() * cssFilters.length)];
            document.body.classList.add(randomFilter);
            setTimeout(() => {
                document.body.classList.remove(randomFilter);
            }, 1000);
        }

        function triggerGlitch() {
            document.body.classList.add('glitch-active');
            playSound(glitchSound);
            setTimeout(() => {
                document.body.classList.remove('glitch-active');
            }, 300);
        }

        function shakeScreen() {
            document.body.classList.add('shake-active');
            setTimeout(() => {
                document.body.classList.remove('shake-active');
            }, 200);
        }

        function createFireworks() {
            const fireworkX = Math.random() * window.innerWidth;
            const fireworkY = Math.random() * window.innerHeight;
            const numFireworkParticles = 30 + Math.floor(Math.random() * 20);

            for (let i = 0; i < numFireworkParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('firework-particle');
                const size = Math.random() * 15 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${fireworkX}px`;
                particle.style.top = `${fireworkY}px`;
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                particle.style.setProperty('--fire-x', `${(Math.random() - 0.5) * 600}px`);
                particle.style.setProperty('--fire-y', `${(Math.random() - 0.5) * 600}px`);

                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        function createNeonShape() {
            const shape = document.createElement('div');
            shape.classList.add('neon-shape');

            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            shape.style.borderColor = randomColor;
            shape.style.boxShadow = `0 0 5px ${randomColor}, 0 0 15px ${randomColor}, 0 0 30px ${randomColor}`;

            const shapeType = Math.floor(Math.random() * 3);
            const size = Math.random() * 100 + 80;

            shape.style.width = `${size}px`;
            shape.style.height = `${size}px`;

            switch (shapeType) {
                case 0:
                    shape.style.borderRadius = '50%';
                    break;
                case 1:
                    break;
                case 2:
                    shape.style.backgroundColor = 'transparent';
                    shape.style.width = '0';
                    shape.style.height = '0';
                    shape.style.borderLeft = `${size / 2}px solid transparent`;
                    shape.style.borderRight = `${size / 2}px solid transparent`;
                    shape.style.borderBottom = `${size}px solid ${randomColor}`;
                    shape.style.boxShadow = 'none';
                    shape.style.filter = `drop-shadow(0 0 5px ${randomColor}) drop-shadow(0 0 15px ${randomColor}) drop-shadow(0 0 30px ${randomColor})`;
                    break;
            }

            const x = Math.random() * (window.innerWidth - size);
            const y = Math.random() * (window.innerHeight - size);
            shape.style.left = `${x}px`;
            shape.style.top = `${y}px`;

            document.body.appendChild(shape);
            shape.addEventListener('animationend', () => shape.remove());
        }

        async function createRandomGif(x, y) { // Updated parameter
            if (!GIPHY_API_KEY) {
                console.error("La clé API Giphy est manquante. Veuillez la définir.");
                return;
            }

            const gifElement = document.createElement('img');
            gifElement.classList.add('giphy-gif');
            document.body.appendChild(gifElement);

            // Center GIF based on its assumed size (200px max-width)
            gifElement.style.left = `${x - 100}px`;
            gifElement.style.top = `${y - 100}px`;

            try {
                const response = await fetch(`https://api.giphy.com/v1/gifs/random?api_key=${GIPHY_API_KEY}&tag=&rating=g`);
                const data = await response.json();

                if (data && data.data && data.data.images && data.data.images.fixed_height.url) {
                    gifElement.src = data.data.images.fixed_height.url;
                } else {
                    console.warn("Aucun GIF trouvé ou URL invalide depuis Giphy API. Utilisation d'une image générique.");
                    gifElement.src = genericImages[Math.floor(Math.random() * genericImages.length)];
                }
            } catch (error) {
                console.error("Erreur lors de la récupération du GIF depuis Giphy:", error);
                gifElement.src = genericImages[Math.floor(Math.random() * genericImages.length)];
            }

            gifElement.addEventListener('animationend', () => gifElement.remove());
        }

        function createPokeball(x, y) { // Updated parameter
            const pokeballElement = document.createElement('img');
            pokeballElement.classList.add('pokeball-image');
            pokeballElement.src = pokeballImages[Math.floor(Math.random() * pokeballImages.length)];

            const size = 100; // Pokeball size
            pokeballElement.style.left = `${x - size / 2}px`;
            pokeballElement.style.top = `${y - size / 2}px`;

            document.body.appendChild(pokeballElement);
            pokeballElement.addEventListener('animationend', () => pokeballElement.remove());
        }

        let originalCursor = document.body.style.cursor;
        function changeCursorTemporarily() {
            const randomCursor = cursorImages[Math.floor(Math.random() * cursorImages.length)];
            document.body.style.cursor = randomCursor;
            setTimeout(() => {
                document.body.style.cursor = originalCursor;
            }, 1500);
        }

        function createAsciiRain() {
            const numChars = 10 + Math.floor(Math.random() * 20);
            for (let i = 0; i < numChars; i++) {
                const charElement = document.createElement('div');
                charElement.classList.add('ascii-char');
                charElement.textContent = asciiChars[Math.floor(Math.random() * asciiChars.length)];
                charElement.style.left = `${Math.random() * window.innerWidth}px`;
                charElement.style.top = `-50px`;
                charElement.style.color = colors[Math.floor(Math.random() * colors.length)];
                charElement.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(charElement);
                charElement.addEventListener('animationend', () => charElement.remove());
            }
        }

        function createTunnelEffect() {
            const tunnel = document.createElement('div');
            tunnel.classList.add('tunnel-effect');
            document.body.appendChild(tunnel);
            tunnel.addEventListener('animationend', () => tunnel.remove());
        }

        function createReactionIcon() {
            const iconElement = document.createElement('div');
            iconElement.classList.add('reaction-icon');
            iconElement.textContent = reactionIcons[Math.floor(Math.random() * reactionIcons.length)];
            iconElement.style.left = `${Math.random() * (window.innerWidth - 50) + 25}px`;
            iconElement.style.top = `${window.innerHeight - 50}px`;
            document.body.appendChild(iconElement);
            iconElement.addEventListener('animationend', () => iconElement.remove());
        }

        function createMonochromaticFlash() {
            const flash = document.createElement('div');
            flash.classList.add('monochromatic-flash');
            flash.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(flash);
            flash.addEventListener('animationend', () => flash.remove());
        }

        function createNoiseOverlay() {
            const noise = document.createElement('div');
            noise.classList.add('noise-overlay');
            document.body.appendChild(noise);
            noise.addEventListener('animationend', () => noise.remove());
        }

        function triggerScreenDistortion() {
            document.body.classList.add('distort-active');
            playSound(zapSound);
            setTimeout(() => {
                document.body.classList.remove('distort-active');
            }, 500);
        }

        function triggerButtonVibration() {
            button.classList.add('button-vibrate');
            playSound(chimeSound);
            setTimeout(() => {
                button.classList.remove('button-vibrate');
            }, 200);
        }

        function triggerCounterPulse() {
            clickCounterElement.classList.add('pulse-light');
            clickCounterElement.style.color = colors[Math.floor(Math.random() * colors.length)];
            setTimeout(() => {
                clickCounterElement.classList.remove('pulse-light');
                clickCounterElement.style.color = '#00ff00';
            }, 1600);
        }

        function createExpandingGrid() {
            const gridSize = 5;
            const cellSize = 30;
            const startX = Math.random() * (window.innerWidth - gridSize * cellSize);
            const startY = Math.random() * (window.innerHeight - gridSize * cellSize);

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    const cell = document.createElement('div');
                    cell.classList.add('expanding-grid-cell');
                    cell.style.width = `${cellSize}px`;
                    cell.style.height = `${cellSize}px`;
                    cell.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    cell.style.left = `${startX + col * cellSize}px`;
                    cell.style.top = `${startY + row * cellSize}px`;
                    cell.style.animationDelay = `${(row + col) * 0.05}s`;
                    document.body.appendChild(cell);
                    cell.addEventListener('animationend', () => cell.remove());
                }
            }
        }

        function createConfettiBurst() {
            const numConfetti = 50 + Math.floor(Math.random() * 50);
            const originX = Math.random() * window.innerWidth;
            const originY = Math.random() * window.innerHeight;

            for (let i = 0; i < numConfetti; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti-particle');
                confetti.style.width = `${Math.random() * 8 + 4}px`;
                confetti.style.height = `${Math.random() * 12 + 6}px`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${originX}px`;
                confetti.style.top = `${originY}px`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                confetti.style.setProperty('--rand-x', `${(Math.random() - 0.5) * 400}px`);
                document.body.appendChild(confetti);
                confetti.addEventListener('animationend', () => confetti.remove());
            }
        }

        function createColorCycleFlash() {
            const flash = document.createElement('div');
            flash.classList.add('color-cycle-flash');
            document.body.appendChild(flash);
            flash.addEventListener('animationend', () => flash.remove());
        }

        const emojis = ['🌟', '✨', '🌈', '💖', '🚀', '🔥', '💎', '🎉', '💫', '💯'];
        function createFloatingEmojis() {
            const numEmojis = 5 + Math.floor(Math.random() * 5);
            const originX = Math.random() * (window.innerWidth - 50) + 25;
            const originY = window.innerHeight - 50;

            for (let i = 0; i < numEmojis; i++) {
                const emoji = document.createElement('div');
                emoji.classList.add('floating-emoji');
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = `${originX + (Math.random() - 0.5) * 50}px`;
                emoji.style.top = `${originY}px`;
                emoji.style.animationDelay = `${Math.random() * 0.3}s`;
                document.body.appendChild(emoji);
                emoji.addEventListener('animationend', () => emoji.remove());
            }
        }

        const backgroundImages = [
            'https://cdn.pixabay.com/photo/2017/08/30/01/05/milky-way-2695569_1280.jpg',
            'https://cdn.pixabay.com/photo/2016/11/29/05/45/astronomy-1867616_1280.jpg',
            'https://cdn.pixabay.com/photo/2017/01/28/02/24/japan-2012928_1280.jpg',
            'https://cdn.pixabay.com/photo/2016/09/21/04/46/disc-1684701_1280.jpg'
        ];
        let originalBodyBackground = document.body.style.backgroundImage;
        function changeRandomBackground() {
            const randomImage = backgroundImages[Math.floor(Math.random() * backgroundImages.length)];
            document.body.style.backgroundImage = `url('${randomImage}')`;
            document.body.style.backgroundSize = 'cover';
            document.body.style.backgroundPosition = 'center';
            document.body.style.transition = 'background-image 0.5s ease-in-out';
            setTimeout(() => {
                document.body.style.backgroundImage = originalBodyBackground;
            }, 2000);
        }

        let originalClickCounterText = clickCounterElement.textContent;
        function scrambleClickCounter() {
            const originalText = clickCounterElement.textContent;
            let scrambleInterval = setInterval(() => {
                let scrambledText = '';
                for (let i = 0; i < originalText.length; i++) {
                    scrambledText += asciiChars[Math.floor(Math.random() * asciiChars.length)];
                }
                clickCounterElement.textContent = scrambledText;
            }, 50);
            setTimeout(() => {
                clearInterval(scrambleInterval);
                clickCounterElement.textContent = originalText;
            }, 500);
        }

        function createRadialPulse(x, y) { // Updated parameter
            const pulse = document.createElement('div');
            pulse.classList.add('radial-pulse');
            pulse.style.color = colors[Math.floor(Math.random() * colors.length)];
            pulse.style.left = `${x}px`;
            pulse.style.top = `${y}px`;
            document.body.appendChild(pulse);
            pulse.addEventListener('animationend', () => pulse.remove());
        }

        let inverted = false;
        function toggleInvertColors() {
            document.body.classList.add('invert-colors');
            inverted = true;
            setTimeout(() => {
                document.body.classList.remove('invert-colors');
                inverted = false;
            }, 1000);
        }

        function playMultiToneBurst() {
            const sounds = [clickSound, laserSound, pokemonSound, glitchSound, fireworkSound, pokeballSound, thumpSound, whooshSound, staticSound, zapSound, chimeSound, popSound, sweepSound, chime2Sound, boingSound, blipSound];
            const numTones = 3 + Math.floor(Math.random() * 3);
            for (let i = 0; i < numTones; i++) {
                const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
                setTimeout(() => {
                    playSound(randomSound);
                }, i * 100);
            }
        }

        const fallingShapes = ['⭐', '🔺', '🔹', '�', '✨'];
        function createFallingObjects() {
            const numObjects = 10 + Math.floor(Math.random() * 10);
            for (let i = 0; i < numObjects; i++) {
                const obj = document.createElement('div');
                obj.classList.add('falling-object');
                obj.textContent = fallingShapes[Math.floor(Math.random() * fallingShapes.length)];
                obj.style.left = `${Math.random() * window.innerWidth}px`;
                obj.style.top = `-50px`;
                obj.style.fontSize = `${Math.random() * 30 + 20}px`;
                obj.style.color = colors[Math.floor(Math.random() * colors.length)];
                obj.style.animationDelay = `${Math.random() * 0.5}s`;
                document.body.appendChild(obj);
                obj.addEventListener('animationend', () => obj.remove());
            }
        }

        function createScanlineOverlay() {
            const overlay = document.createElement('div');
            overlay.classList.add('scanline-overlay');
            document.body.appendChild(overlay);
            overlay.addEventListener('animationend', () => overlay.remove());
        }

        const burstWords = ["BOOST!", "CRITICAL!", "COMBO!", "MAX!", "POWER!", "FOU!", "EXPLOSION!", "IMPACT!"];
        function createRandomTextBurst(x, y) { // Updated parameter
            const numTexts = 3 + Math.floor(Math.random() * 3);
            for (let i = 0; i < numTexts; i++) {
                const text = document.createElement('div');
                text.classList.add('text-burst-item');
                text.textContent = burstWords[Math.floor(Math.random() * burstWords.length)];
                text.style.left = `${x + (Math.random() - 0.5) * 100}px`;
                text.style.top = `${y + (Math.random() - 0.5) * 100}px`;
                text.style.color = colors[Math.floor(Math.random() * colors.length)];
                text.style.animationDelay = `${Math.random() * 0.2}s`;
                document.body.appendChild(text);
                text.addEventListener('animationend', () => text.remove());
            }
        }

        function triggerButtonScalePulse() {
            button.classList.add('button-scale-pulse');
            setTimeout(() => {
                button.classList.remove('button-scale-pulse');
            }, 300);
        }

        function triggerHueRotateFlash() {
            const flash = document.createElement('div');
            flash.classList.add('hue-rotate-flash');
            document.body.appendChild(flash);
            flash.addEventListener('animationend', () => flash.remove());
        }

        let mouseTrailActive = false;
        function activateMouseTrail() {
            if (mouseTrailActive) return;
            mouseTrailActive = true;
            document.addEventListener('mousemove', createMouseTrailParticle);
            setTimeout(() => {
                document.removeEventListener('mousemove', createMouseTrailParticle);
                mouseTrailActive = false;
            }, 2000);
        }

        function createMouseTrailParticle(e) {
            const particle = document.createElement('div');
            particle.classList.add('mouse-trail-particle');
            const size = Math.random() * 10 + 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            particle.style.left = `${e.clientX}px`;
            particle.style.top = `${e.clientY}px`;
            document.body.appendChild(particle);
            particle.addEventListener('animationend', () => particle.remove());
        }

        function createRippleEffect(x, y) { // Updated parameter
            const ripple = document.createElement('div');
            ripple.classList.add('ripple-effect');
            ripple.style.color = colors[Math.floor(Math.random() * colors.length)];
            ripple.style.left = `${x}px`;
            ripple.style.top = `${y}px`;
            document.body.appendChild(ripple);
            ripple.addEventListener('animationend', () => ripple.remove());
        }

        const popIcons = ['💡', '✨', '🏆', '🥇', '⚡', '💥', '🌟', '🎯', '✅', '⬆️'];
        function createRandomIconPop(x, y) { // Updated parameter
            const icon = document.createElement('div');
            icon.classList.add('icon-pop');
            icon.textContent = popIcons[Math.floor(Math.random() * popIcons.length)];
            icon.style.left = `${x + (Math.random() - 0.5) * 150}px`;
            icon.style.top = `${y + (Math.random() - 0.5) * 150}px`;
            icon.style.color = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(icon);
            icon.addEventListener('animationend', () => icon.remove());
        }

        function triggerScreenZoomBurst() {
            document.body.classList.add('screen-zoom-active');
            setTimeout(() => {
                document.body.classList.remove('screen-zoom-active');
            }, 400);
        }

        function triggerAudioPitchShift() {
            const soundsToPitch = [clickSound, popSound, blipSound, boingSound, chimeSound];
            const randomSound = soundsToPitch[Math.floor(Math.random() * soundsToPitch.length)];
            const randomPitch = 0.5 + Math.random() * 1.5;
            playSound(randomSound, randomPitch);
        }

        const abstractShapes = ['square', 'circle', 'triangle'];
        function createFallingAbstractParticles() {
            const numParticles = 20 + Math.floor(Math.random() * 20);
            for (let i = 0; i < numParticles; i++) {
                const particle = document.createElement('div');
                particle.classList.add('abstract-particle');
                const size = Math.random() * 15 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.left = `${Math.random() * window.innerWidth}px`;
                particle.style.top = `-50px`;
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                
                const randomShape = abstractShapes[Math.floor(Math.random() * abstractShapes.length)];
                if (randomShape === 'square') {
                    particle.style.borderRadius = '0';
                } else if (randomShape === 'circle') {
                    particle.style.borderRadius = '50%';
                } else {
                    particle.style.width = '0';
                    particle.style.height = '0';
                    particle.style.borderLeft = `${size / 2}px solid transparent`;
                    particle.style.borderRight = `${size / 2}px solid transparent`;
                    particle.style.borderBottom = `${size}px solid ${particle.style.backgroundColor}`;
                    particle.style.backgroundColor = 'transparent';
                }
                
                document.body.appendChild(particle);
                particle.addEventListener('animationend', () => particle.remove());
            }
        }

        const backgroundPatterns = [
            'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAFUlEQVQYV2NkYGAwBuKzgcXIBgAEkADZz0q1GAAAAABJRU5ErkJggg==")',
            'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAIklEQVQYV2NkwAT/gBiBGBgYGAoIGJgYGBhQkQxQ4QxQYQRQ4QxQYARQ4QwAFwQCAZ0gAAAAAElFTkSuQmCC")',
            'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAHElEQVQYV2NkYGD4z8DAwMDQkQxQ4QxQYQRQ4QwAFwQCAZ0gAAAAAElFTlSuQmCC")'
        ];
        function createRandomBackgroundPattern() {
            const pattern = document.createElement('div');
            pattern.classList.add('pattern-overlay');
            pattern.style.backgroundImage = backgroundPatterns[Math.floor(Math.random() * backgroundPatterns.length)];
            pattern.style.backgroundSize = '20px 20px';
            pattern.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.appendChild(pattern);
            pattern.addEventListener('animationend', () => pattern.remove());
        }


    </script>
</body>
</html>
�
